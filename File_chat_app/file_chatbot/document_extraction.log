2025-05-14 16:37:31,775 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/file_processor.py changed, reloading.
2025-05-14 16:37:38,100 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_1ZIvLt5.pdf
2025-05-14 16:37:38,100 - document_extraction - INFO - File type: .pdf, Size: 0.08 MB
2025-05-14 16:37:38,100 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_1ZIvLt5.pdf
2025-05-14 16:37:38,101 - document_extraction - INFO - PDF has 9 pages
2025-05-14 16:37:38,284 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_1ZIvLt5.pdf
2025-05-14 16:37:38,284 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_1ZIvLt5.pdf
2025-05-14 16:37:38,709 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 16:37:38,709 - openai._base_client - INFO - Retrying request to /embeddings in 0.771787 seconds
2025-05-14 16:37:40,352 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 16:37:40,352 - openai._base_client - INFO - Retrying request to /embeddings in 1.517998 seconds
2025-05-14 16:39:19,806 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/file_processor.py changed, reloading.
2025-05-14 16:39:38,214 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_FvPQaYh.pdf
2025-05-14 16:39:38,215 - document_extraction - INFO - File type: .pdf, Size: 0.08 MB
2025-05-14 16:39:38,215 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_FvPQaYh.pdf
2025-05-14 16:39:38,215 - document_extraction - INFO - PDF has 9 pages
2025-05-14 16:39:38,393 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_FvPQaYh.pdf
2025-05-14 16:39:38,393 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_FvPQaYh.pdf
2025-05-14 16:39:39,240 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 16:39:39,241 - openai._base_client - INFO - Retrying request to /embeddings in 0.981110 seconds
2025-05-14 16:39:46,100 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 16:39:46,101 - openai._base_client - INFO - Retrying request to /embeddings in 1.904527 seconds
2025-05-14 16:39:48,557 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 16:44:54,639 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/file_processor.py changed, reloading.
2025-05-14 16:45:06,116 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_iXRdZSw.pdf
2025-05-14 16:45:06,116 - document_extraction - INFO - File type: .pdf, Size: 0.08 MB
2025-05-14 16:45:06,116 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_iXRdZSw.pdf
2025-05-14 16:45:06,117 - document_extraction - INFO - PDF has 9 pages
2025-05-14 16:45:06,326 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_iXRdZSw.pdf
2025-05-14 16:45:06,326 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_iXRdZSw.pdf
2025-05-14 16:45:06,327 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-14 16:45:06,327 - document_extraction - INFO - Input text length: 22183 characters
2025-05-14 16:45:06,327 - document_extraction - INFO - Text chunking complete. Created 28 chunks
2025-05-14 16:45:06,719 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 16:45:06,720 - openai._base_client - INFO - Retrying request to /embeddings in 0.859210 seconds
2025-05-14 16:45:08,502 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 16:45:08,503 - openai._base_client - INFO - Retrying request to /embeddings in 1.875261 seconds
2025-05-14 16:45:10,813 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 17:10:58,376 - document_storage - INFO - Creating new document for user ID: 2
2025-05-14 17:10:58,382 - document_storage - INFO - Document saved with ID: 9
2025-05-14 17:10:58,382 - document_storage - INFO - Processing file: sample-terms-conditions-agreement_T8VP1S5.pdf, size: 86.30 KB, type: pdf
2025-05-14 17:10:58,382 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_T8VP1S5.pdf
2025-05-14 17:10:58,382 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_T8VP1S5.pdf
2025-05-14 17:10:58,382 - document_extraction - INFO - File type: .pdf, Size: 0.08 MB
2025-05-14 17:10:58,382 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_T8VP1S5.pdf
2025-05-14 17:10:58,383 - document_extraction - INFO - PDF has 9 pages
2025-05-14 17:10:58,580 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_T8VP1S5.pdf
2025-05-14 17:10:58,580 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_T8VP1S5.pdf
2025-05-14 17:10:58,580 - document_storage - INFO - Text extraction complete. Extracted 22183 characters
2025-05-14 17:10:58,580 - document_storage - INFO - Chunking text for document ID: 9
2025-05-14 17:10:58,580 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-14 17:10:58,580 - document_extraction - INFO - Input text length: 22183 characters
2025-05-14 17:10:58,581 - document_extraction - INFO - Text chunking complete. Created 28 chunks
2025-05-14 17:10:58,581 - document_storage - INFO - Text chunking complete. Created 28 chunks
2025-05-14 17:10:58,581 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 9
2025-05-14 17:10:58,581 - document_storage - INFO - Starting to store chunks for document ID: 9, Title: Dummy
2025-05-14 17:10:58,581 - document_storage - INFO - Processing 28 chunks to store in database
2025-05-14 17:10:58,581 - document_storage - INFO - Generating embeddings for 28 chunks
2025-05-14 17:10:58,581 - document_storage - INFO - Generating embeddings for 28 texts (~4525 tokens)
2025-05-14 17:10:58,581 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-14 17:10:59,512 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 17:10:59,513 - openai._base_client - INFO - Retrying request to /embeddings in 0.966442 seconds
2025-05-14 17:11:02,921 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 17:11:02,922 - openai._base_client - INFO - Retrying request to /embeddings in 1.677930 seconds
2025-05-14 17:11:05,456 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 17:11:05,458 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-14 17:11:05,458 - document_storage - ERROR - Error generating embeddings: 'stop'
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 149, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 42, in <lambda>
    f"Retrying embedding generation after error. Attempt {retry_state.attempt_number}/{retry_state.kwargs['stop'].max_attempt_number}"
                                                                                       ~~~~~~~~~~~~~~~~~~^^^^^^^^
KeyError: 'stop'
2025-05-14 17:11:05,462 - document_storage - ERROR - Failed to store chunks for document ID: 9: 'stop'
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 149, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 42, in <lambda>
    f"Retrying embedding generation after error. Attempt {retry_state.attempt_number}/{retry_state.kwargs['stop'].max_attempt_number}"
                                                                                       ~~~~~~~~~~~~~~~~~~^^^^^^^^
KeyError: 'stop'
2025-05-14 17:11:05,466 - document_storage - INFO - Document ID: 9 marked as failed to process
2025-05-14 17:11:05,466 - document_storage - INFO - Document chunk storage process completed in 6.88 seconds for document ID: 9
2025-05-14 17:11:05,743 - document_storage - ERROR - Error processing document ID: 9: 'stop'
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 85, in perform_create
    store_document_chunks(document, chunks)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 149, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 42, in <lambda>
    f"Retrying embedding generation after error. Attempt {retry_state.attempt_number}/{retry_state.kwargs['stop'].max_attempt_number}"
                                                                                       ~~~~~~~~~~~~~~~~~~^^^^^^^^
KeyError: 'stop'
2025-05-14 17:11:05,750 - document_storage - INFO - Document ID: None deleted due to processing failure
2025-05-14 17:23:03,155 - document_storage - INFO - Creating new document for user ID: 2
2025-05-14 17:23:03,159 - document_storage - INFO - Document saved with ID: 10
2025-05-14 17:23:03,159 - document_storage - INFO - Processing file: OnePageContract.pdf, size: 34.76 KB, type: pdf
2025-05-14 17:23:03,159 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract.pdf
2025-05-14 17:23:03,159 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract.pdf
2025-05-14 17:23:03,159 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-14 17:23:03,159 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract.pdf
2025-05-14 17:23:03,159 - document_extraction - INFO - PDF has 1 pages
2025-05-14 17:23:03,169 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract.pdf
2025-05-14 17:23:03,169 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract.pdf
2025-05-14 17:23:03,169 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-14 17:23:03,169 - document_storage - INFO - Chunking text for document ID: 10
2025-05-14 17:23:03,169 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-14 17:23:03,169 - document_extraction - INFO - Input text length: 2491 characters
2025-05-14 17:23:03,169 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-14 17:23:03,169 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-14 17:23:03,169 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 10
2025-05-14 17:23:03,170 - document_storage - INFO - Starting to store chunks for document ID: 10, Title: Dummy
2025-05-14 17:23:03,170 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-14 17:23:03,170 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-14 17:23:03,170 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-14 17:23:03,170 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-14 17:23:04,957 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 17:23:04,958 - openai._base_client - INFO - Retrying request to /embeddings in 0.888509 seconds
2025-05-14 17:23:06,798 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 17:23:06,799 - openai._base_client - INFO - Retrying request to /embeddings in 1.508585 seconds
2025-05-14 17:23:09,050 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 17:23:09,050 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-14 17:23:09,051 - document_storage - ERROR - Error generating embeddings: 'stop'
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 149, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 42, in <lambda>
    f"Retrying embedding generation after error. Attempt {retry_state.attempt_number}/{retry_state.kwargs['stop'].max_attempt_number}"
                                                                                       ~~~~~~~~~~~~~~~~~~^^^^^^^^
KeyError: 'stop'
2025-05-14 17:23:09,053 - document_storage - ERROR - Failed to store chunks for document ID: 10: 'stop'
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 149, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 42, in <lambda>
    f"Retrying embedding generation after error. Attempt {retry_state.attempt_number}/{retry_state.kwargs['stop'].max_attempt_number}"
                                                                                       ~~~~~~~~~~~~~~~~~~^^^^^^^^
KeyError: 'stop'
2025-05-14 17:23:09,056 - document_storage - INFO - Document ID: 10 marked as failed to process
2025-05-14 17:23:09,056 - document_storage - INFO - Document chunk storage process completed in 5.89 seconds for document ID: 10
2025-05-14 17:23:09,066 - document_storage - ERROR - Error processing document ID: 10: 'stop'
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 85, in perform_create
    store_document_chunks(document, chunks)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 149, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 42, in <lambda>
    f"Retrying embedding generation after error. Attempt {retry_state.attempt_number}/{retry_state.kwargs['stop'].max_attempt_number}"
                                                                                       ~~~~~~~~~~~~~~~~~~^^^^^^^^
KeyError: 'stop'
2025-05-14 17:23:09,071 - document_storage - INFO - Document ID: None deleted due to processing failure
2025-05-14 18:17:29,619 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py changed, reloading.
2025-05-14 18:17:44,773 - document_storage - INFO - Creating new document for user ID: 2
2025-05-14 18:17:44,778 - document_storage - INFO - Document saved with ID: 11
2025-05-14 18:17:44,778 - document_storage - INFO - Processing file: OnePageContract_OagZanq.pdf, size: 34.76 KB, type: pdf
2025-05-14 18:17:44,778 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_OagZanq.pdf
2025-05-14 18:17:44,778 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_OagZanq.pdf
2025-05-14 18:17:44,778 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-14 18:17:44,778 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_OagZanq.pdf
2025-05-14 18:17:44,779 - document_extraction - INFO - PDF has 1 pages
2025-05-14 18:17:44,788 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_OagZanq.pdf
2025-05-14 18:17:44,788 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_OagZanq.pdf
2025-05-14 18:17:44,788 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-14 18:17:44,788 - document_storage - INFO - Chunking text for document ID: 11
2025-05-14 18:17:44,788 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-14 18:17:44,788 - document_extraction - INFO - Input text length: 2491 characters
2025-05-14 18:17:44,788 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-14 18:17:44,788 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-14 18:17:44,788 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 11
2025-05-14 18:17:44,788 - document_storage - INFO - Starting to store chunks for document ID: 11, Title: Dummy
2025-05-14 18:17:44,788 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-14 18:17:44,788 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-14 18:17:44,788 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-14 18:17:44,788 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-14 18:17:45,519 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:17:45,521 - openai._base_client - INFO - Retrying request to /embeddings in 0.962543 seconds
2025-05-14 18:17:46,742 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:17:46,742 - openai._base_client - INFO - Retrying request to /embeddings in 1.601814 seconds
2025-05-14 18:17:49,162 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:17:49,163 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-14 18:17:49,163 - document_storage - WARNING - Retrying embedding generation after error. Attempt 1
2025-05-14 18:17:51,168 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-14 18:17:51,169 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-14 18:17:51,984 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:17:51,985 - openai._base_client - INFO - Retrying request to /embeddings in 0.903711 seconds
2025-05-14 18:17:53,520 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:17:53,521 - openai._base_client - INFO - Retrying request to /embeddings in 1.809448 seconds
2025-05-14 18:17:56,183 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:17:56,184 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-14 18:17:56,184 - document_storage - WARNING - Retrying embedding generation after error. Attempt 2
2025-05-14 18:17:58,186 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-14 18:17:58,187 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-14 18:17:59,034 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:17:59,034 - openai._base_client - INFO - Retrying request to /embeddings in 0.962252 seconds
2025-05-14 18:18:01,098 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:18:01,099 - openai._base_client - INFO - Retrying request to /embeddings in 1.597172 seconds
2025-05-14 18:18:03,966 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:18:03,968 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-14 18:18:03,968 - document_storage - WARNING - Retrying embedding generation after error. Attempt 3
2025-05-14 18:18:03,968 - document_storage - ERROR - Error generating embeddings: RetryError[<Future at 0x146233f20 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 78, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 150, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x146233f20 state=finished raised RateLimitError>]
2025-05-14 18:18:03,975 - document_storage - ERROR - Failed to store chunks for document ID: 11: RetryError[<Future at 0x146233f20 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 78, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 150, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x146233f20 state=finished raised RateLimitError>]
2025-05-14 18:18:03,980 - document_storage - INFO - Document ID: 11 marked as failed to process
2025-05-14 18:18:03,981 - document_storage - INFO - Document chunk storage process completed in 19.19 seconds for document ID: 11
2025-05-14 18:18:03,993 - document_storage - ERROR - Error processing document ID: 11: RetryError[<Future at 0x146233f20 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 78, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 85, in perform_create
    store_document_chunks(document, chunks)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 150, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x146233f20 state=finished raised RateLimitError>]
2025-05-14 18:18:04,010 - document_storage - INFO - Document ID: None deleted due to processing failure
2025-05-14 18:29:20,079 - document_storage - INFO - Creating new document for user ID: 2
2025-05-14 18:29:20,083 - document_storage - INFO - Document saved with ID: 12
2025-05-14 18:29:20,083 - document_storage - INFO - Processing file: OnePageContract_RXUtt4H.pdf, size: 34.76 KB, type: pdf
2025-05-14 18:29:20,083 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_RXUtt4H.pdf
2025-05-14 18:29:20,083 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_RXUtt4H.pdf
2025-05-14 18:29:20,083 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-14 18:29:20,083 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_RXUtt4H.pdf
2025-05-14 18:29:20,083 - document_extraction - INFO - PDF has 1 pages
2025-05-14 18:29:20,126 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_RXUtt4H.pdf
2025-05-14 18:29:20,126 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_RXUtt4H.pdf
2025-05-14 18:29:20,126 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-14 18:29:20,126 - document_storage - INFO - Chunking text for document ID: 12
2025-05-14 18:29:20,126 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-14 18:29:20,126 - document_extraction - INFO - Input text length: 2491 characters
2025-05-14 18:29:20,126 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-14 18:29:20,126 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-14 18:29:20,126 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 12
2025-05-14 18:29:20,126 - document_storage - INFO - Starting to store chunks for document ID: 12, Title: Dummy
2025-05-14 18:29:20,126 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-14 18:29:20,126 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-14 18:29:20,126 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-14 18:29:20,126 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-14 18:29:20,490 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:29:20,491 - openai._base_client - INFO - Retrying request to /embeddings in 0.974312 seconds
2025-05-14 18:29:22,273 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:29:22,274 - openai._base_client - INFO - Retrying request to /embeddings in 1.722522 seconds
2025-05-14 18:29:25,345 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:29:25,346 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-14 18:29:25,347 - document_storage - WARNING - Retrying embedding generation after error. Attempt 1
2025-05-14 18:29:27,352 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-14 18:29:27,353 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-14 18:29:28,417 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:29:28,417 - openai._base_client - INFO - Retrying request to /embeddings in 0.970854 seconds
2025-05-14 18:29:30,073 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:29:30,074 - openai._base_client - INFO - Retrying request to /embeddings in 1.969438 seconds
2025-05-14 18:29:32,410 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:29:32,411 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-14 18:29:32,412 - document_storage - WARNING - Retrying embedding generation after error. Attempt 2
2025-05-14 18:29:34,415 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-14 18:29:34,415 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-14 18:29:35,232 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:29:35,232 - openai._base_client - INFO - Retrying request to /embeddings in 0.806871 seconds
2025-05-14 18:29:37,337 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:29:37,337 - openai._base_client - INFO - Retrying request to /embeddings in 1.513587 seconds
2025-05-14 18:29:40,296 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:29:40,297 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-14 18:29:40,298 - document_storage - WARNING - Retrying embedding generation after error. Attempt 3
2025-05-14 18:29:40,298 - document_storage - ERROR - Error generating embeddings: RetryError[<Future at 0x14633d610 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 78, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 150, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x14633d610 state=finished raised RateLimitError>]
2025-05-14 18:29:40,300 - document_storage - ERROR - Failed to store chunks for document ID: 12: RetryError[<Future at 0x14633d610 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 78, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 150, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x14633d610 state=finished raised RateLimitError>]
2025-05-14 18:29:40,305 - document_storage - INFO - Document ID: 12 marked as failed to process
2025-05-14 18:29:40,305 - document_storage - INFO - Document chunk storage process completed in 20.18 seconds for document ID: 12
2025-05-14 18:29:40,305 - document_storage - ERROR - Error processing document ID: 12: RetryError[<Future at 0x14633d610 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 78, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 85, in perform_create
    store_document_chunks(document, chunks)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 150, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x14633d610 state=finished raised RateLimitError>]
2025-05-14 18:29:40,311 - document_storage - INFO - Document ID: None deleted due to processing failure
2025-05-14 18:29:57,557 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py changed, reloading.
2025-05-14 18:30:00,513 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/file_processor.py changed, reloading.
2025-05-14 18:30:04,312 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py changed, reloading.
2025-05-14 18:30:15,225 - document_storage - INFO - Creating new document for user ID: 2
2025-05-14 18:30:15,228 - document_storage - INFO - Document saved with ID: 13
2025-05-14 18:30:15,228 - document_storage - INFO - Processing file: OnePageContract_eVr7JoM.pdf, size: 34.76 KB, type: pdf
2025-05-14 18:30:15,228 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_eVr7JoM.pdf
2025-05-14 18:30:15,228 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_eVr7JoM.pdf
2025-05-14 18:30:15,228 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-14 18:30:15,228 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_eVr7JoM.pdf
2025-05-14 18:30:15,229 - document_extraction - INFO - PDF has 1 pages
2025-05-14 18:30:15,239 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_eVr7JoM.pdf
2025-05-14 18:30:15,239 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_eVr7JoM.pdf
2025-05-14 18:30:15,239 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-14 18:30:15,239 - document_storage - INFO - Chunking text for document ID: 13
2025-05-14 18:30:15,239 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-14 18:30:15,239 - document_extraction - INFO - Input text length: 2491 characters
2025-05-14 18:30:15,239 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-14 18:30:15,239 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-14 18:30:15,239 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 13
2025-05-14 18:30:15,239 - document_storage - INFO - Starting to store chunks for document ID: 13, Title: Dummy
2025-05-14 18:30:15,239 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-14 18:30:15,239 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-14 18:30:15,239 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-14 18:30:15,239 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-14 18:30:15,601 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:30:15,601 - openai._base_client - INFO - Retrying request to /embeddings in 0.950153 seconds
2025-05-14 18:30:16,877 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:30:16,878 - openai._base_client - INFO - Retrying request to /embeddings in 1.666665 seconds
2025-05-14 18:30:19,003 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:30:19,004 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-14 18:30:19,005 - document_storage - WARNING - Retrying embedding generation after error. Attempt 1
2025-05-14 18:30:21,010 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-14 18:30:21,010 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-14 18:30:21,667 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:30:21,668 - openai._base_client - INFO - Retrying request to /embeddings in 0.866666 seconds
2025-05-14 18:30:22,895 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:30:22,896 - openai._base_client - INFO - Retrying request to /embeddings in 1.854280 seconds
2025-05-14 18:30:25,071 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:30:25,071 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-14 18:30:25,072 - document_storage - WARNING - Retrying embedding generation after error. Attempt 2
2025-05-14 18:30:27,074 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-14 18:30:27,075 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-14 18:30:28,116 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:30:28,117 - openai._base_client - INFO - Retrying request to /embeddings in 0.794734 seconds
2025-05-14 18:30:29,243 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:30:29,244 - openai._base_client - INFO - Retrying request to /embeddings in 1.546788 seconds
2025-05-14 18:30:31,189 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-14 18:30:31,190 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-14 18:30:31,190 - document_storage - WARNING - Retrying embedding generation after error. Attempt 3
2025-05-14 18:30:31,190 - document_storage - ERROR - Error generating embeddings: RetryError[<Future at 0x123730140 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 78, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 150, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x123730140 state=finished raised RateLimitError>]
2025-05-14 18:30:31,196 - document_storage - ERROR - Failed to store chunks for document ID: 13: RetryError[<Future at 0x123730140 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 78, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 150, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x123730140 state=finished raised RateLimitError>]
2025-05-14 18:30:31,201 - document_storage - INFO - Document ID: 13 marked as failed to process
2025-05-14 18:30:31,201 - document_storage - INFO - Document chunk storage process completed in 15.96 seconds for document ID: 13
2025-05-14 18:30:31,216 - document_storage - ERROR - Error processing document ID: 13: RetryError[<Future at 0x123730140 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 78, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 85, in perform_create
    store_document_chunks(document, chunks)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 150, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x123730140 state=finished raised RateLimitError>]
2025-05-14 18:30:31,221 - document_storage - INFO - Document ID: None deleted due to processing failure
2025-05-14 18:38:24,749 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py changed, reloading.
2025-05-14 18:38:36,023 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py changed, reloading.
2025-05-15 02:01:13,642 - django.request - WARNING - Bad Request: /api/chat-sessions/
2025-05-15 02:02:44,906 - django.request - WARNING - Bad Request: /api/chat-sessions/
2025-05-15 02:02:53,202 - django.request - WARNING - Bad Request: /api/chat-sessions/
2025-05-15 02:03:02,272 - django.request - WARNING - Bad Request: /api/chat-sessions/
2025-05-15 02:05:41,129 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 02:05:41,132 - django.request - WARNING - Not Found: /api/chat-sessions/1/ask/
2025-05-15 02:55:52,373 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/urls.py changed, reloading.
2025-05-15 03:02:42,700 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py changed, reloading.
2025-05-15 03:03:01,426 - django.request - WARNING - Not Found: /
2025-05-15 03:03:01,852 - django.request - WARNING - Not Found: /
2025-05-15 03:06:36,502 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/file_chatbot/urls.py changed, reloading.
2025-05-15 03:06:43,780 - django.request - WARNING - Forbidden: /
2025-05-15 03:06:53,050 - django.request - WARNING - Forbidden: /
2025-05-15 03:06:53,938 - django.request - WARNING - Forbidden: /
2025-05-15 03:06:56,492 - django.request - WARNING - Forbidden: /
2025-05-15 03:06:57,207 - django.request - WARNING - Forbidden: /
2025-05-15 03:07:03,082 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 03:07:19,399 - django.request - WARNING - Forbidden: /
2025-05-15 03:07:19,420 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 03:27:46,336 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py changed, reloading.
2025-05-15 03:48:24,883 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 03:48:26,256 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 03:48:29,896 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 03:48:31,884 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 03:51:13,671 - django.request - ERROR - Internal Server Error: /documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2112, in get_prep_value
    return int(value)
           ^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/contrib/auth/models.py", line 437, in __int__
    raise TypeError(
TypeError: Cannot cast AnonymousUser to int. Are you trying to use it in place of User?

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 38, in list
    queryset = self.filter_queryset(self.get_queryset())
                                    ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 55, in get_queryset
    return Document.objects.filter(uploaded_by=self.request.user if self.request.user.is_authenticated else AnonymousUser())
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1600, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1632, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1546, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1376, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2114, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <django.contrib.auth.models.AnonymousUser object at 0x12e62b620>.
2025-05-15 03:51:59,868 - django.request - ERROR - Internal Server Error: /api/documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2112, in get_prep_value
    return int(value)
           ^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/contrib/auth/models.py", line 437, in __int__
    raise TypeError(
TypeError: Cannot cast AnonymousUser to int. Are you trying to use it in place of User?

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 38, in list
    queryset = self.filter_queryset(self.get_queryset())
                                    ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 55, in get_queryset
    return Document.objects.filter(uploaded_by=self.request.user if self.request.user.is_authenticated else AnonymousUser())
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1600, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1632, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1546, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1376, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2114, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <django.contrib.auth.models.AnonymousUser object at 0x12e5891f0>.
2025-05-15 03:52:31,043 - django.request - ERROR - Internal Server Error: /documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2112, in get_prep_value
    return int(value)
           ^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/contrib/auth/models.py", line 437, in __int__
    raise TypeError(
TypeError: Cannot cast AnonymousUser to int. Are you trying to use it in place of User?

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 38, in list
    queryset = self.filter_queryset(self.get_queryset())
                                    ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 55, in get_queryset
    return Document.objects.filter(uploaded_by=self.request.user if self.request.user.is_authenticated else AnonymousUser())
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1600, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1632, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1546, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1376, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2114, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <django.contrib.auth.models.AnonymousUser object at 0x12e7fa5d0>.
2025-05-15 03:58:37,092 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py changed, reloading.
2025-05-15 03:59:58,821 - document_storage - INFO - Creating new document for user ID: None
2025-05-15 03:59:58,922 - django.request - ERROR - Internal Server Error: /documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 19, in create
    self.perform_create(serializer)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 65, in perform_create
    document = serializer.save(uploaded_by=self.request.user  if self.request.user.is_authenticated else AnonymousUser())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 212, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 962, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 675, in create
    obj = self.model(**kwargs)
          ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/base.py", line 543, in __init__
    _setattr(self, field.name, rel_obj)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_descriptors.py", line 283, in __set__
    raise ValueError(
ValueError: Cannot assign "<django.contrib.auth.models.AnonymousUser object at 0x1219fc620>": "Document.uploaded_by" must be a "User" instance.
2025-05-15 04:10:26,564 - document_storage - INFO - Creating new document for user ID: None
2025-05-15 04:10:26,658 - django.request - ERROR - Internal Server Error: /api/documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 19, in create
    self.perform_create(serializer)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 65, in perform_create
    document = serializer.save(uploaded_by=self.request.user  if self.request.user.is_authenticated else AnonymousUser())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 212, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 962, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 675, in create
    obj = self.model(**kwargs)
          ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/base.py", line 543, in __init__
    _setattr(self, field.name, rel_obj)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_descriptors.py", line 283, in __set__
    raise ValueError(
ValueError: Cannot assign "<django.contrib.auth.models.AnonymousUser object at 0x1218e1bb0>": "Document.uploaded_by" must be a "User" instance.
2025-05-15 04:33:42,951 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 04:33:46,700 - document_storage - INFO - Creating new document for user ID: None
2025-05-15 04:33:46,780 - django.request - ERROR - Internal Server Error: /api/documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 19, in create
    self.perform_create(serializer)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 65, in perform_create
    document = serializer.save(uploaded_by=self.request.user  if self.request.user.is_authenticated else AnonymousUser())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 212, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 962, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 675, in create
    obj = self.model(**kwargs)
          ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/base.py", line 543, in __init__
    _setattr(self, field.name, rel_obj)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_descriptors.py", line 283, in __set__
    raise ValueError(
ValueError: Cannot assign "<django.contrib.auth.models.AnonymousUser object at 0x121a56f60>": "Document.uploaded_by" must be a "User" instance.
2025-05-15 04:33:46,813 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 04:36:50,063 - root - INFO - Fetching chat sessions for user AnonymousUser
2025-05-15 04:36:50,111 - django.request - ERROR - Internal Server Error: /chat-sessions/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2112, in get_prep_value
    return int(value)
           ^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/contrib/auth/models.py", line 437, in __int__
    raise TypeError(
TypeError: Cannot cast AnonymousUser to int. Are you trying to use it in place of User?

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 38, in list
    queryset = self.filter_queryset(self.get_queryset())
                                    ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 119, in get_queryset
    return ChatSession.objects.filter(user=self.request.user  if self.request.user.is_authenticated else AnonymousUser())
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1600, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1632, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1546, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1376, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2114, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <django.contrib.auth.models.AnonymousUser object at 0x1219fd340>.
2025-05-15 04:43:45,773 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 04:43:45,783 - document_storage - INFO - Document saved with ID: 14
2025-05-15 04:43:45,784 - document_storage - INFO - Processing file: OnePageContract_u8UHq97.pdf, size: 34.76 KB, type: pdf
2025-05-15 04:43:45,784 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_u8UHq97.pdf
2025-05-15 04:43:45,784 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_u8UHq97.pdf
2025-05-15 04:43:45,784 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 04:43:45,784 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_u8UHq97.pdf
2025-05-15 04:43:45,784 - document_extraction - INFO - PDF has 1 pages
2025-05-15 04:43:45,871 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_u8UHq97.pdf
2025-05-15 04:43:45,871 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_u8UHq97.pdf
2025-05-15 04:43:45,871 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 04:43:45,871 - document_storage - INFO - Chunking text for document ID: 14
2025-05-15 04:43:45,871 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 04:43:45,871 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 04:43:45,871 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 04:43:45,871 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 04:43:45,871 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 14
2025-05-15 04:43:45,871 - document_storage - INFO - Starting to store chunks for document ID: 14, Title: What is main topic of this file
2025-05-15 04:43:45,871 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 04:43:45,871 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 04:43:45,871 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 04:43:45,871 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 04:43:46,800 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:43:46,800 - openai._base_client - INFO - Retrying request to /embeddings in 0.864935 seconds
2025-05-15 04:43:48,355 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:43:48,356 - openai._base_client - INFO - Retrying request to /embeddings in 1.956232 seconds
2025-05-15 04:43:51,014 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:43:51,016 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-15 04:43:51,016 - document_storage - WARNING - Retrying embedding generation after error. Attempt 1
2025-05-15 04:43:53,022 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 04:43:53,022 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 04:43:53,836 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:43:53,837 - openai._base_client - INFO - Retrying request to /embeddings in 0.760896 seconds
2025-05-15 04:43:54,933 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:43:54,933 - openai._base_client - INFO - Retrying request to /embeddings in 1.508261 seconds
2025-05-15 04:43:56,767 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:43:56,767 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-15 04:43:56,768 - document_storage - WARNING - Retrying embedding generation after error. Attempt 2
2025-05-15 04:43:58,770 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 04:43:58,770 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 04:43:59,092 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:43:59,092 - openai._base_client - INFO - Retrying request to /embeddings in 0.815035 seconds
2025-05-15 04:44:00,645 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:44:00,646 - openai._base_client - INFO - Retrying request to /embeddings in 1.741982 seconds
2025-05-15 04:44:02,865 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:44:02,866 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-15 04:44:02,866 - document_storage - WARNING - Retrying embedding generation after error. Attempt 3
2025-05-15 04:44:02,866 - document_storage - ERROR - Error generating embeddings: RetryError[<Future at 0x121b4d760 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 75, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 147, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x121b4d760 state=finished raised RateLimitError>]
2025-05-15 04:44:02,871 - document_storage - ERROR - Failed to store chunks for document ID: 14: RetryError[<Future at 0x121b4d760 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 75, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 147, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x121b4d760 state=finished raised RateLimitError>]
2025-05-15 04:44:02,884 - document_storage - INFO - Document ID: 14 marked as failed to process
2025-05-15 04:44:02,884 - document_storage - INFO - Document chunk storage process completed in 17.01 seconds for document ID: 14
2025-05-15 04:44:02,907 - document_storage - ERROR - Error processing document ID: 14: RetryError[<Future at 0x121b4d760 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 75, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 99, in perform_create
    store_document_chunks(document, chunks)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 147, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x121b4d760 state=finished raised RateLimitError>]
2025-05-15 04:44:02,914 - document_storage - INFO - Document ID: None deleted due to processing failure
2025-05-15 04:44:53,720 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 04:44:53,725 - document_storage - INFO - Document saved with ID: 15
2025-05-15 04:44:53,725 - document_storage - INFO - Processing file: OnePageContract_KqMPRgT.pdf, size: 34.76 KB, type: pdf
2025-05-15 04:44:53,725 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_KqMPRgT.pdf
2025-05-15 04:44:53,725 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_KqMPRgT.pdf
2025-05-15 04:44:53,725 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 04:44:53,725 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_KqMPRgT.pdf
2025-05-15 04:44:53,725 - document_extraction - INFO - PDF has 1 pages
2025-05-15 04:44:53,736 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_KqMPRgT.pdf
2025-05-15 04:44:53,736 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_KqMPRgT.pdf
2025-05-15 04:44:53,736 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 04:44:53,736 - document_storage - INFO - Chunking text for document ID: 15
2025-05-15 04:44:53,736 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 04:44:53,736 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 04:44:53,736 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 04:44:53,736 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 04:44:53,736 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 15
2025-05-15 04:44:53,736 - document_storage - INFO - Starting to store chunks for document ID: 15, Title: What is main topic of this file
2025-05-15 04:44:53,736 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 04:44:53,736 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 04:44:53,736 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 04:44:53,736 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 04:44:54,872 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:44:54,872 - openai._base_client - INFO - Retrying request to /embeddings in 0.901869 seconds
2025-05-15 04:44:56,426 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:44:56,426 - openai._base_client - INFO - Retrying request to /embeddings in 1.732127 seconds
2025-05-15 04:44:58,420 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:44:58,421 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-15 04:44:58,421 - document_storage - WARNING - Retrying embedding generation after error. Attempt 1
2025-05-15 04:45:00,421 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 04:45:00,423 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 04:45:00,683 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:45:00,684 - openai._base_client - INFO - Retrying request to /embeddings in 0.964636 seconds
2025-05-15 04:45:02,347 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:45:02,348 - openai._base_client - INFO - Retrying request to /embeddings in 1.699789 seconds
2025-05-15 04:45:04,649 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:45:04,650 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-15 04:45:04,650 - document_storage - WARNING - Retrying embedding generation after error. Attempt 2
2025-05-15 04:45:06,656 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 04:45:06,656 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 04:45:07,299 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:45:07,301 - openai._base_client - INFO - Retrying request to /embeddings in 0.779820 seconds
2025-05-15 04:45:08,384 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:45:08,385 - openai._base_client - INFO - Retrying request to /embeddings in 1.864535 seconds
2025-05-15 04:45:10,764 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:45:10,764 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-15 04:45:10,765 - document_storage - WARNING - Retrying embedding generation after error. Attempt 3
2025-05-15 04:45:10,765 - document_storage - ERROR - Error generating embeddings: RetryError[<Future at 0x1218afa10 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 75, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 147, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1218afa10 state=finished raised RateLimitError>]
2025-05-15 04:45:10,767 - document_storage - ERROR - Failed to store chunks for document ID: 15: RetryError[<Future at 0x1218afa10 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 75, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 147, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1218afa10 state=finished raised RateLimitError>]
2025-05-15 04:45:10,773 - document_storage - INFO - Document ID: 15 marked as failed to process
2025-05-15 04:45:10,773 - document_storage - INFO - Document chunk storage process completed in 17.04 seconds for document ID: 15
2025-05-15 04:45:10,774 - document_storage - ERROR - Error processing document ID: 15: RetryError[<Future at 0x1218afa10 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 75, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 99, in perform_create
    store_document_chunks(document, chunks)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 147, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1218afa10 state=finished raised RateLimitError>]
2025-05-15 04:45:10,784 - document_storage - INFO - Document ID: None deleted due to processing failure
2025-05-15 04:51:04,504 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 04:51:04,508 - document_storage - INFO - Document saved with ID: 16
2025-05-15 04:51:04,508 - document_storage - INFO - Processing file: OnePageContract_4eQzCpy.pdf, size: 34.76 KB, type: pdf
2025-05-15 04:51:04,508 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_4eQzCpy.pdf
2025-05-15 04:51:04,508 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_4eQzCpy.pdf
2025-05-15 04:51:04,508 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 04:51:04,509 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_4eQzCpy.pdf
2025-05-15 04:51:04,510 - document_extraction - INFO - PDF has 1 pages
2025-05-15 04:51:04,523 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_4eQzCpy.pdf
2025-05-15 04:51:04,523 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_4eQzCpy.pdf
2025-05-15 04:51:04,523 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 04:51:04,523 - document_storage - INFO - Chunking text for document ID: 16
2025-05-15 04:51:04,523 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 04:51:04,523 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 04:51:04,523 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 04:51:04,523 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 04:51:04,523 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 16
2025-05-15 04:51:04,523 - document_storage - INFO - Starting to store chunks for document ID: 16, Title: What is main topic of this file
2025-05-15 04:51:04,523 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 04:51:04,523 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 04:51:04,523 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 04:51:04,523 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 04:51:05,751 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:51:05,752 - openai._base_client - INFO - Retrying request to /embeddings in 0.944963 seconds
2025-05-15 04:51:07,015 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:51:07,015 - openai._base_client - INFO - Retrying request to /embeddings in 1.640997 seconds
2025-05-15 04:51:08,980 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:51:08,981 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-15 04:51:08,981 - document_storage - WARNING - Retrying embedding generation after error. Attempt 1
2025-05-15 04:51:10,983 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 04:51:10,984 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 04:51:11,511 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:51:11,512 - openai._base_client - INFO - Retrying request to /embeddings in 0.980829 seconds
2025-05-15 04:51:12,988 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:51:12,989 - openai._base_client - INFO - Retrying request to /embeddings in 1.700360 seconds
2025-05-15 04:51:15,011 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:51:15,011 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-15 04:51:15,011 - document_storage - WARNING - Retrying embedding generation after error. Attempt 2
2025-05-15 04:51:17,015 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 04:51:17,015 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 04:51:17,388 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:51:17,389 - openai._base_client - INFO - Retrying request to /embeddings in 0.869106 seconds
2025-05-15 04:51:18,642 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:51:18,643 - openai._base_client - INFO - Retrying request to /embeddings in 1.621611 seconds
2025-05-15 04:51:20,714 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 429 Too Many Requests"
2025-05-15 04:51:20,715 - document_storage - ERROR - OpenAI API rate limit exceeded: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-05-15 04:51:20,715 - document_storage - WARNING - Retrying embedding generation after error. Attempt 3
2025-05-15 04:51:20,716 - document_storage - ERROR - Error generating embeddings: RetryError[<Future at 0x1218eb380 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 75, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 147, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1218eb380 state=finished raised RateLimitError>]
2025-05-15 04:51:20,721 - document_storage - ERROR - Failed to store chunks for document ID: 16: RetryError[<Future at 0x1218eb380 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 75, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 147, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1218eb380 state=finished raised RateLimitError>]
2025-05-15 04:51:20,740 - document_storage - INFO - Document ID: 16 marked as failed to process
2025-05-15 04:51:20,740 - document_storage - INFO - Document chunk storage process completed in 16.22 seconds for document ID: 16
2025-05-15 04:51:20,740 - document_storage - ERROR - Error processing document ID: 16: RetryError[<Future at 0x1218eb380 state=finished raised RateLimitError>]
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 75, in create_embeddings
    response = openai.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/embeddings.py", line 106, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 916, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 958, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 99, in perform_create
    store_document_chunks(document, chunks)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/embedding_service.py", line 147, in store_document_chunks
    embeddings = create_embeddings(chunks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1218eb380 state=finished raised RateLimitError>]
2025-05-15 04:51:20,746 - document_storage - INFO - Document ID: None deleted due to processing failure
2025-05-15 05:13:49,976 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 05:13:49,982 - document_storage - INFO - Document saved with ID: 17
2025-05-15 05:13:49,982 - document_storage - INFO - Processing file: OnePageContract_tvXuidz.pdf, size: 34.76 KB, type: pdf
2025-05-15 05:13:49,982 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_tvXuidz.pdf
2025-05-15 05:13:49,982 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_tvXuidz.pdf
2025-05-15 05:13:49,982 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 05:13:49,982 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_tvXuidz.pdf
2025-05-15 05:13:49,982 - document_extraction - INFO - PDF has 1 pages
2025-05-15 05:13:49,993 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_tvXuidz.pdf
2025-05-15 05:13:49,993 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_tvXuidz.pdf
2025-05-15 05:13:49,993 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 05:13:49,993 - document_storage - INFO - Chunking text for document ID: 17
2025-05-15 05:13:49,993 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 05:13:49,993 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 05:13:49,993 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 05:13:49,993 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 05:13:49,993 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 17
2025-05-15 05:13:49,993 - document_storage - INFO - Starting to store chunks for document ID: 17, Title: What is main topic of this file
2025-05-15 05:13:49,993 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 05:13:49,993 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 05:13:49,993 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 05:13:49,993 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 05:13:51,259 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 05:13:51,455 - document_storage - INFO - OpenAI API request completed in 1.46 seconds
2025-05-15 05:13:51,455 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 05:13:51,455 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 05:13:51,456 - document_storage - INFO - Embedding generation completed in 1.46 seconds (2.73 texts/second)
2025-05-15 05:13:51,456 - document_storage - INFO - Successfully generated 4 embeddings in 1.46 seconds
2025-05-15 05:13:51,456 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 05:13:51,506 - document_storage - INFO - Successfully stored 4 chunks in 0.05 seconds
2025-05-15 05:13:51,506 - document_storage - INFO - Marking document ID: 17 as processed
2025-05-15 05:13:51,508 - document_storage - INFO - Document ID: 17 successfully marked as processed
2025-05-15 05:13:51,517 - document_storage - INFO - Document chunk storage process completed in 1.52 seconds for document ID: 17
2025-05-15 05:13:51,530 - document_storage - INFO - Document processing complete for ID: 17
2025-05-15 05:21:06,556 - root - INFO - Creating a new chat session for user Raj
2025-05-15 05:24:31,608 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 05:24:31,612 - root - INFO - Received a question for ChatSession ID 1
2025-05-15 05:24:31,612 - root - INFO - Question: Who is the president
2025-05-15 05:24:31,616 - root - INFO - Running similarity search for document_id=17, top_k=5
2025-05-15 05:24:31,616 - document_storage - INFO - Generating embeddings for 1 texts (~4 tokens)
2025-05-15 05:24:31,616 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 05:24:32,594 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 05:24:32,596 - document_storage - INFO - OpenAI API request completed in 0.98 seconds
2025-05-15 05:24:32,596 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 05:24:32,596 - document_storage - INFO - Token usage: 4 prompt tokens, 4 total tokens
2025-05-15 05:24:32,596 - document_storage - INFO - Embedding generation completed in 0.98 seconds (1.02 texts/second)
2025-05-15 05:24:32,600 - root - INFO - Retrieved 4 chunks for document_id=17
2025-05-15 05:24:32,607 - root - INFO - Top similarity score: 0.3866059059676881
2025-05-15 05:24:32,607 - root - INFO - Returning top 4 chunks
2025-05-15 05:24:32,607 - root - INFO - Found 4 relevant chunks
2025-05-15 05:24:33,428 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-05-15 05:24:33,503 - django.request - ERROR - Internal Server Error: /api/chat-sessions/1/ask/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 158, in ask
    response_text = generate_response(question, relevant_chunks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/openai_service.py", line 28, in generate_response
    response = client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_utils/_utils.py", line 272, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 645, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': 'invalid model ID', 'type': 'invalid_request_error', 'param': None, 'code': None}}
2025-05-15 05:39:13,921 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 05:39:13,926 - root - INFO - Received a question for ChatSession ID 1
2025-05-15 05:39:13,927 - root - INFO - Question: Who is the president
2025-05-15 05:39:13,930 - root - INFO - Running similarity search for document_id=17, top_k=5
2025-05-15 05:39:13,930 - document_storage - INFO - Generating embeddings for 1 texts (~4 tokens)
2025-05-15 05:39:13,930 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 05:39:14,787 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 05:39:14,792 - document_storage - INFO - OpenAI API request completed in 0.86 seconds
2025-05-15 05:39:14,792 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 05:39:14,792 - document_storage - INFO - Token usage: 4 prompt tokens, 4 total tokens
2025-05-15 05:39:14,792 - document_storage - INFO - Embedding generation completed in 0.86 seconds (1.16 texts/second)
2025-05-15 05:39:14,799 - root - INFO - Retrieved 4 chunks for document_id=17
2025-05-15 05:39:14,806 - root - INFO - Top similarity score: 0.3866059059676881
2025-05-15 05:39:14,806 - root - INFO - Returning top 4 chunks
2025-05-15 05:39:14,806 - root - INFO - Found 4 relevant chunks
2025-05-15 05:39:15,705 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-05-15 05:39:15,742 - django.request - ERROR - Internal Server Error: /api/chat-sessions/1/ask/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 158, in ask
    response_text = generate_response(question, relevant_chunks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/services/openai_service.py", line 28, in generate_response
    response = client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_utils/_utils.py", line 272, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 645, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1088, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 853, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/openai/_base_client.py", line 930, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': 'invalid model ID', 'type': 'invalid_request_error', 'param': None, 'code': None}}
2025-05-15 05:39:34,986 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 05:39:34,988 - root - INFO - Received a question for ChatSession ID 1
2025-05-15 05:39:34,989 - root - INFO - Question: Who is the president
2025-05-15 05:39:34,992 - root - INFO - Running similarity search for document_id=17, top_k=5
2025-05-15 05:39:34,992 - document_storage - INFO - Generating embeddings for 1 texts (~4 tokens)
2025-05-15 05:39:34,992 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 05:39:36,187 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 05:39:36,189 - document_storage - INFO - OpenAI API request completed in 1.20 seconds
2025-05-15 05:39:36,189 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 05:39:36,189 - document_storage - INFO - Token usage: 4 prompt tokens, 4 total tokens
2025-05-15 05:39:36,189 - document_storage - INFO - Embedding generation completed in 1.20 seconds (0.83 texts/second)
2025-05-15 05:39:36,193 - root - INFO - Retrieved 4 chunks for document_id=17
2025-05-15 05:39:36,200 - root - INFO - Top similarity score: 0.3865576055120753
2025-05-15 05:39:36,200 - root - INFO - Returning top 4 chunks
2025-05-15 05:39:36,200 - root - INFO - Found 4 relevant chunks
2025-05-15 05:39:37,005 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 05:39:37,008 - root - INFO - Generated response using OpenAI
2025-05-15 05:43:30,602 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 05:43:30,621 - root - INFO - Received a question for ChatSession ID 1
2025-05-15 05:43:30,621 - root - INFO - Question: what is the hourly compensation of the services
2025-05-15 05:43:30,632 - root - INFO - Running similarity search for document_id=17, top_k=5
2025-05-15 05:43:30,632 - document_storage - INFO - Generating embeddings for 1 texts (~8 tokens)
2025-05-15 05:43:30,632 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 05:43:31,138 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 05:43:31,140 - document_storage - INFO - OpenAI API request completed in 0.51 seconds
2025-05-15 05:43:31,141 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 05:43:31,141 - document_storage - INFO - Token usage: 8 prompt tokens, 8 total tokens
2025-05-15 05:43:31,141 - document_storage - INFO - Embedding generation completed in 0.51 seconds (1.96 texts/second)
2025-05-15 05:43:31,144 - root - INFO - Retrieved 4 chunks for document_id=17
2025-05-15 05:43:31,151 - root - INFO - Top similarity score: 0.42024600131816264
2025-05-15 05:43:31,151 - root - INFO - Returning top 4 chunks
2025-05-15 05:43:31,152 - root - INFO - Found 4 relevant chunks
2025-05-15 05:43:32,698 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 05:43:32,707 - root - INFO - Generated response using OpenAI
2025-05-15 07:50:18,029 - document_storage - INFO - Creating new document for user ID: None
2025-05-15 07:50:18,098 - django.request - ERROR - Internal Server Error: /documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 19, in create
    self.perform_create(serializer)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 65, in perform_create
    document = serializer.save(uploaded_by=self.request.user  if self.request.user.is_authenticated else AnonymousUser())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 212, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 962, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 675, in create
    obj = self.model(**kwargs)
          ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/base.py", line 543, in __init__
    _setattr(self, field.name, rel_obj)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_descriptors.py", line 283, in __set__
    raise ValueError(
ValueError: Cannot assign "<django.contrib.auth.models.AnonymousUser object at 0x122917980>": "Document.uploaded_by" must be a "User" instance.
2025-05-15 07:52:23,560 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 07:52:23,565 - root - INFO - Received a question for ChatSession ID 1
2025-05-15 07:52:23,565 - root - INFO - Question: what is the hourly compensation of the services
2025-05-15 07:52:23,571 - root - INFO - Running similarity search for document_id=17, top_k=5
2025-05-15 07:52:23,573 - document_storage - INFO - Generating embeddings for 1 texts (~8 tokens)
2025-05-15 07:52:23,573 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 07:52:24,813 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 07:52:24,817 - document_storage - INFO - OpenAI API request completed in 1.24 seconds
2025-05-15 07:52:24,817 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 07:52:24,817 - document_storage - INFO - Token usage: 8 prompt tokens, 8 total tokens
2025-05-15 07:52:24,818 - document_storage - INFO - Embedding generation completed in 1.24 seconds (0.80 texts/second)
2025-05-15 07:52:24,820 - root - INFO - Retrieved 4 chunks for document_id=17
2025-05-15 07:52:24,826 - root - INFO - Top similarity score: 0.42024600131816264
2025-05-15 07:52:24,827 - root - INFO - Returning top 4 chunks
2025-05-15 07:52:24,827 - root - INFO - Found 4 relevant chunks
2025-05-15 07:52:26,553 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 07:52:26,558 - root - INFO - Generated response using OpenAI
2025-05-15 08:11:48,353 - document_storage - INFO - Creating new document for user ID: None
2025-05-15 08:11:48,482 - django.request - ERROR - Internal Server Error: /documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 19, in create
    self.perform_create(serializer)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 65, in perform_create
    document = serializer.save(uploaded_by=self.request.user  if self.request.user.is_authenticated else AnonymousUser())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 212, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 962, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 675, in create
    obj = self.model(**kwargs)
          ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/base.py", line 543, in __init__
    _setattr(self, field.name, rel_obj)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_descriptors.py", line 283, in __set__
    raise ValueError(
ValueError: Cannot assign "<django.contrib.auth.models.AnonymousUser object at 0x11d6f9760>": "Document.uploaded_by" must be a "User" instance.
2025-05-15 08:13:34,114 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 08:16:23,700 - root - INFO - Fetching chat sessions for user AnonymousUser
2025-05-15 08:16:23,768 - django.request - ERROR - Internal Server Error: /chat-sessions/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2112, in get_prep_value
    return int(value)
           ^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/contrib/auth/models.py", line 437, in __int__
    raise TypeError(
TypeError: Cannot cast AnonymousUser to int. Are you trying to use it in place of User?

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 38, in list
    queryset = self.filter_queryset(self.get_queryset())
                                    ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 119, in get_queryset
    return ChatSession.objects.filter(user=self.request.user  if self.request.user.is_authenticated else AnonymousUser())
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1600, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1632, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1546, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1376, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2114, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <django.contrib.auth.models.AnonymousUser object at 0x122c1eed0>.
2025-05-15 08:16:23,795 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 08:58:12,924 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/urls.py changed, reloading.
2025-05-15 09:02:44,112 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/urls.py changed, reloading.
2025-05-15 09:02:49,362 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 09:02:49,367 - root - INFO - Received a question for ChatSession ID 1
2025-05-15 09:02:49,367 - root - INFO - Question: what is the hourly compensation of the services
2025-05-15 09:02:49,394 - root - INFO - Running similarity search for document_id=17, top_k=5
2025-05-15 09:02:49,395 - document_storage - INFO - Generating embeddings for 1 texts (~8 tokens)
2025-05-15 09:02:49,395 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 09:02:50,294 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 09:02:50,297 - document_storage - INFO - OpenAI API request completed in 0.90 seconds
2025-05-15 09:02:50,297 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 09:02:50,297 - document_storage - INFO - Token usage: 8 prompt tokens, 8 total tokens
2025-05-15 09:02:50,297 - document_storage - INFO - Embedding generation completed in 0.90 seconds (1.11 texts/second)
2025-05-15 09:02:50,300 - root - INFO - Retrieved 4 chunks for document_id=17
2025-05-15 09:02:50,304 - root - INFO - Top similarity score: 0.42024600131816264
2025-05-15 09:02:50,305 - root - INFO - Returning top 4 chunks
2025-05-15 09:02:50,305 - root - INFO - Found 4 relevant chunks
2025-05-15 09:02:52,331 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 09:02:52,337 - root - INFO - Generated response using OpenAI
2025-05-15 09:03:21,311 - django.request - WARNING - Not Found: /
2025-05-15 09:03:22,411 - django.request - WARNING - Not Found: /
2025-05-15 09:03:54,630 - django.request - ERROR - Internal Server Error: /api/ui/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2112, in get_prep_value
    return int(value)
           ^^^^^^^^^^
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'SimpleLazyObject'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 45, in chatbot_ui
    documents = Document.objects.filter(uploaded_by=request.user)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1600, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1632, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1546, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1376, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2114, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <SimpleLazyObject: <django.contrib.auth.models.AnonymousUser object at 0x13af32690>>.
2025-05-15 09:05:20,219 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 09:05:37,643 - django.request - ERROR - Internal Server Error: /api/ui/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2112, in get_prep_value
    return int(value)
           ^^^^^^^^^^
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'SimpleLazyObject'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 45, in chatbot_ui
    documents = Document.objects.filter(uploaded_by=request.user)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1600, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1632, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1546, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1376, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/__init__.py", line 2114, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <SimpleLazyObject: <django.contrib.auth.models.AnonymousUser object at 0x13b458260>>.
2025-05-15 09:05:37,662 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 09:05:56,084 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 09:08:14,870 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py changed, reloading.
2025-05-15 09:08:28,107 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py changed, reloading.
2025-05-15 09:08:34,610 - django.request - ERROR - Internal Server Error: /api/ui/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 46, in chatbot_ui
    return render(request, 'chatbot/chatbot.html', {'documents': documents})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/shortcuts.py", line 24, in render
    content = loader.render_to_string(template_name, context, request, using=using)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/loader.py", line 61, in render_to_string
    template = get_template(template_name, using=using)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/loader.py", line 19, in get_template
    raise TemplateDoesNotExist(template_name, chain=chain)
django.template.exceptions.TemplateDoesNotExist: chatbot/chatbot.html
2025-05-15 09:09:31,771 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py changed, reloading.
2025-05-15 09:09:43,482 - django.request - ERROR - Internal Server Error: /api/ui/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 49, in chatbot_ui
    return render(request, 'chatbot/chatbot.html', {'documents': documents})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/shortcuts.py", line 24, in render
    content = loader.render_to_string(template_name, context, request, using=using)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/loader.py", line 61, in render_to_string
    template = get_template(template_name, using=using)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/loader.py", line 19, in get_template
    raise TemplateDoesNotExist(template_name, chain=chain)
django.template.exceptions.TemplateDoesNotExist: chatbot/chatbot.html
2025-05-15 09:09:44,679 - django.request - ERROR - Internal Server Error: /api/ui/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 49, in chatbot_ui
    return render(request, 'chatbot/chatbot.html', {'documents': documents})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/shortcuts.py", line 24, in render
    content = loader.render_to_string(template_name, context, request, using=using)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/loader.py", line 61, in render_to_string
    template = get_template(template_name, using=using)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/loader.py", line 19, in get_template
    raise TemplateDoesNotExist(template_name, chain=chain)
django.template.exceptions.TemplateDoesNotExist: chatbot/chatbot.html
2025-05-15 09:12:11,397 - django.utils.autoreload - INFO - /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py changed, reloading.
2025-05-15 09:12:18,081 - django.request - ERROR - Internal Server Error: /api/ui/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/base.py", line 502, in parse
    compile_func = self.tags[command]
                   ~~~~~~~~~^^^^^^^^^
KeyError: 'static'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 49, in chatbot_ui
    return render(request, 'chatbot.html', {'documents': documents})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/shortcuts.py", line 24, in render
    content = loader.render_to_string(template_name, context, request, using=using)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/loader.py", line 61, in render_to_string
    template = get_template(template_name, using=using)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/loader.py", line 15, in get_template
    return engine.get_template(template_name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/backends/django.py", line 33, in get_template
    return Template(self.engine.get_template(template_name), self)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/engine.py", line 175, in get_template
    template, origin = self.find_template(template_name)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/engine.py", line 157, in find_template
    template = loader.get_template(name, skip=skip)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/loaders/cached.py", line 57, in get_template
    template = super().get_template(template_name, skip)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/loaders/base.py", line 28, in get_template
    return Template(
           ^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/base.py", line 154, in __init__
    self.nodelist = self.compile_nodelist()
                    ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/base.py", line 196, in compile_nodelist
    return parser.parse()
           ^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/base.py", line 504, in parse
    self.invalid_block_tag(token, command, parse_until)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/template/base.py", line 565, in invalid_block_tag
    raise self.error(
django.template.exceptions.TemplateSyntaxError: Invalid block tag on line 7: 'static'. Did you forget to register or load this tag?
2025-05-15 09:18:15,400 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 11:28:11,788 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 11:28:11,798 - document_storage - INFO - Document saved with ID: 18
2025-05-15 11:28:11,798 - document_storage - INFO - Processing file: sample-terms-conditions-agreement_Unf1ZOw.pdf, size: 86.30 KB, type: pdf
2025-05-15 11:28:11,798 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_Unf1ZOw.pdf
2025-05-15 11:28:11,798 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_Unf1ZOw.pdf
2025-05-15 11:28:11,798 - document_extraction - INFO - File type: .pdf, Size: 0.08 MB
2025-05-15 11:28:11,798 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_Unf1ZOw.pdf
2025-05-15 11:28:11,799 - document_extraction - INFO - PDF has 9 pages
2025-05-15 11:28:11,991 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_Unf1ZOw.pdf
2025-05-15 11:28:11,991 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/sample-terms-conditions-agreement_Unf1ZOw.pdf
2025-05-15 11:28:11,991 - document_storage - INFO - Text extraction complete. Extracted 22183 characters
2025-05-15 11:28:11,991 - document_storage - INFO - Chunking text for document ID: 18
2025-05-15 11:28:11,991 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 11:28:11,991 - document_extraction - INFO - Input text length: 22183 characters
2025-05-15 11:28:11,992 - document_extraction - INFO - Text chunking complete. Created 28 chunks
2025-05-15 11:28:11,992 - document_storage - INFO - Text chunking complete. Created 28 chunks
2025-05-15 11:28:11,992 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 18
2025-05-15 11:28:11,992 - document_storage - INFO - Starting to store chunks for document ID: 18, Title: Document2
2025-05-15 11:28:11,992 - document_storage - INFO - Processing 28 chunks to store in database
2025-05-15 11:28:11,992 - document_storage - INFO - Generating embeddings for 28 chunks
2025-05-15 11:28:11,992 - document_storage - INFO - Generating embeddings for 28 texts (~4525 tokens)
2025-05-15 11:28:11,992 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 11:28:13,333 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 11:28:13,555 - document_storage - INFO - OpenAI API request completed in 1.56 seconds
2025-05-15 11:28:13,556 - document_storage - INFO - Generated 28 embeddings with dimension 1536
2025-05-15 11:28:13,556 - document_storage - INFO - Token usage: 5330 prompt tokens, 5330 total tokens
2025-05-15 11:28:13,556 - document_storage - INFO - Embedding generation completed in 1.56 seconds (17.90 texts/second)
2025-05-15 11:28:13,556 - document_storage - INFO - Successfully generated 28 embeddings in 1.56 seconds
2025-05-15 11:28:13,556 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 11:28:13,797 - document_storage - INFO - Successfully stored 28 chunks in 0.24 seconds
2025-05-15 11:28:13,797 - document_storage - INFO - Marking document ID: 18 as processed
2025-05-15 11:28:13,799 - document_storage - INFO - Document ID: 18 successfully marked as processed
2025-05-15 11:28:13,800 - document_storage - INFO - Document chunk storage process completed in 1.81 seconds for document ID: 18
2025-05-15 11:28:13,812 - document_storage - INFO - Document processing complete for ID: 18
2025-05-15 11:36:03,157 - django.request - WARNING - Not Found: /
2025-05-15 12:01:54,701 - django.request - WARNING - Bad Request: /api/documents/
2025-05-15 12:02:22,478 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 12:02:40,014 - django.request - WARNING - Bad Request: /api/documents/
2025-05-15 12:05:21,088 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 12:05:30,864 - document_storage - INFO - Creating new document for user ID: None
2025-05-15 12:05:30,899 - django.request - ERROR - Internal Server Error: /api/documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 19, in create
    self.perform_create(serializer)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 73, in perform_create
    document = serializer.save(uploaded_by=self.request.user  if self.request.user.is_authenticated else AnonymousUser())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 212, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 962, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 675, in create
    obj = self.model(**kwargs)
          ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/base.py", line 543, in __init__
    _setattr(self, field.name, rel_obj)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_descriptors.py", line 283, in __set__
    raise ValueError(
ValueError: Cannot assign "<django.contrib.auth.models.AnonymousUser object at 0x147bbda60>": "Document.uploaded_by" must be a "User" instance.
2025-05-15 12:13:24,052 - document_storage - INFO - Creating new document for user ID: None
2025-05-15 12:13:24,161 - django.request - ERROR - Internal Server Error: /api/documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 19, in create
    self.perform_create(serializer)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 73, in perform_create
    document = serializer.save(uploaded_by=self.request.user  if self.request.user.is_authenticated else AnonymousUser())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 212, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 962, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 675, in create
    obj = self.model(**kwargs)
          ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/base.py", line 543, in __init__
    _setattr(self, field.name, rel_obj)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_descriptors.py", line 283, in __set__
    raise ValueError(
ValueError: Cannot assign "<django.contrib.auth.models.AnonymousUser object at 0x13013a0f0>": "Document.uploaded_by" must be a "User" instance.
2025-05-15 12:20:33,389 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 12:20:42,791 - document_storage - INFO - Creating new document for user ID: None
2025-05-15 12:20:42,829 - django.request - ERROR - Internal Server Error: /api/documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 19, in create
    self.perform_create(serializer)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 73, in perform_create
    document = serializer.save(uploaded_by=self.request.user  if self.request.user.is_authenticated else AnonymousUser())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 212, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 962, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 675, in create
    obj = self.model(**kwargs)
          ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/base.py", line 543, in __init__
    _setattr(self, field.name, rel_obj)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_descriptors.py", line 283, in __set__
    raise ValueError(
ValueError: Cannot assign "<django.contrib.auth.models.AnonymousUser object at 0x13cad6750>": "Document.uploaded_by" must be a "User" instance.
2025-05-15 12:27:51,417 - django.request - WARNING - Not Found: /
2025-05-15 12:27:56,151 - django.request - WARNING - Not Found: /favicon.ico
2025-05-15 12:28:38,608 - document_storage - INFO - Creating new document for user ID: None
2025-05-15 12:28:38,642 - django.request - ERROR - Internal Server Error: /api/documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 19, in create
    self.perform_create(serializer)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 73, in perform_create
    document = serializer.save(uploaded_by=self.request.user  if self.request.user.is_authenticated else AnonymousUser())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 212, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 962, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 675, in create
    obj = self.model(**kwargs)
          ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/base.py", line 543, in __init__
    _setattr(self, field.name, rel_obj)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_descriptors.py", line 283, in __set__
    raise ValueError(
ValueError: Cannot assign "<django.contrib.auth.models.AnonymousUser object at 0x1215403b0>": "Document.uploaded_by" must be a "User" instance.
2025-05-15 12:28:45,990 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 12:28:45,996 - document_storage - INFO - Document saved with ID: 19
2025-05-15 12:28:45,996 - document_storage - INFO - Processing file: OnePageContract_ZAGFxbK.pdf, size: 34.76 KB, type: pdf
2025-05-15 12:28:45,996 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_ZAGFxbK.pdf
2025-05-15 12:28:45,996 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_ZAGFxbK.pdf
2025-05-15 12:28:45,996 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 12:28:45,996 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_ZAGFxbK.pdf
2025-05-15 12:28:45,997 - document_extraction - INFO - PDF has 1 pages
2025-05-15 12:28:46,009 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_ZAGFxbK.pdf
2025-05-15 12:28:46,009 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_ZAGFxbK.pdf
2025-05-15 12:28:46,009 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 12:28:46,009 - document_storage - INFO - Chunking text for document ID: 19
2025-05-15 12:28:46,009 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 12:28:46,009 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 12:28:46,009 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 12:28:46,009 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 12:28:46,009 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 19
2025-05-15 12:28:46,009 - document_storage - INFO - Starting to store chunks for document ID: 19, Title: Document2
2025-05-15 12:28:46,009 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 12:28:46,009 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 12:28:46,009 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 12:28:46,009 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 12:28:47,117 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 12:28:47,386 - document_storage - INFO - OpenAI API request completed in 1.38 seconds
2025-05-15 12:28:47,387 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 12:28:47,387 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 12:28:47,387 - document_storage - INFO - Embedding generation completed in 1.38 seconds (2.90 texts/second)
2025-05-15 12:28:47,387 - document_storage - INFO - Successfully generated 4 embeddings in 1.38 seconds
2025-05-15 12:28:47,387 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 12:28:47,428 - document_storage - INFO - Successfully stored 4 chunks in 0.04 seconds
2025-05-15 12:28:47,428 - document_storage - INFO - Marking document ID: 19 as processed
2025-05-15 12:28:47,430 - document_storage - INFO - Document ID: 19 successfully marked as processed
2025-05-15 12:28:47,432 - document_storage - INFO - Document chunk storage process completed in 1.42 seconds for document ID: 19
2025-05-15 12:28:47,453 - document_storage - INFO - Document processing complete for ID: 19
2025-05-15 12:32:36,200 - django.request - WARNING - Bad Request: /api/chat-sessions/
2025-05-15 12:32:42,902 - root - INFO - Creating a new chat session for user Raj
2025-05-15 12:33:45,590 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 12:33:45,592 - root - INFO - Received a question for ChatSession ID 2
2025-05-15 12:33:45,592 - root - INFO - Question: Whos is the president
2025-05-15 12:33:45,594 - root - INFO - Running similarity search for document_id=19, top_k=5
2025-05-15 12:33:45,594 - document_storage - INFO - Generating embeddings for 1 texts (~4 tokens)
2025-05-15 12:33:45,594 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 12:33:46,428 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 12:33:46,444 - document_storage - INFO - OpenAI API request completed in 0.85 seconds
2025-05-15 12:33:46,444 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 12:33:46,444 - document_storage - INFO - Token usage: 5 prompt tokens, 5 total tokens
2025-05-15 12:33:46,445 - document_storage - INFO - Embedding generation completed in 0.85 seconds (1.18 texts/second)
2025-05-15 12:33:46,447 - root - INFO - Retrieved 4 chunks for document_id=19
2025-05-15 12:33:46,453 - root - INFO - Top similarity score: 0.36418375843950135
2025-05-15 12:33:46,454 - root - INFO - Returning top 4 chunks
2025-05-15 12:33:46,454 - root - INFO - Found 4 relevant chunks
2025-05-15 12:33:48,482 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 12:33:48,490 - root - INFO - Generated response using OpenAI
2025-05-15 12:37:03,400 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 12:37:09,071 - document_storage - INFO - Creating new document for user ID: None
2025-05-15 12:37:09,103 - django.request - ERROR - Internal Server Error: /api/documents/
Traceback (most recent call last):
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/mixins.py", line 19, in create
    self.perform_create(serializer)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/chatbot/views.py", line 73, in perform_create
    document = serializer.save(uploaded_by=self.request.user  if self.request.user.is_authenticated else AnonymousUser())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 212, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 962, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/query.py", line 675, in create
    obj = self.model(**kwargs)
          ^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/base.py", line 543, in __init__
    _setattr(self, field.name, rel_obj)
  File "/Users/rajatmittal/Personal Projects/File_chat_app/venv/lib/python3.12/site-packages/django/db/models/fields/related_descriptors.py", line 283, in __set__
    raise ValueError(
ValueError: Cannot assign "<django.contrib.auth.models.AnonymousUser object at 0x14e2c0a70>": "Document.uploaded_by" must be a "User" instance.
2025-05-15 12:44:48,703 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 12:44:59,210 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 12:44:59,215 - document_storage - INFO - Document saved with ID: 20
2025-05-15 12:44:59,215 - document_storage - INFO - Processing file: OnePageContract_Jkq4AAr.pdf, size: 34.76 KB, type: pdf
2025-05-15 12:44:59,215 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Jkq4AAr.pdf
2025-05-15 12:44:59,215 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Jkq4AAr.pdf
2025-05-15 12:44:59,215 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 12:44:59,215 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Jkq4AAr.pdf
2025-05-15 12:44:59,215 - document_extraction - INFO - PDF has 1 pages
2025-05-15 12:44:59,229 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Jkq4AAr.pdf
2025-05-15 12:44:59,229 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Jkq4AAr.pdf
2025-05-15 12:44:59,229 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 12:44:59,229 - document_storage - INFO - Chunking text for document ID: 20
2025-05-15 12:44:59,229 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 12:44:59,229 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 12:44:59,229 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 12:44:59,229 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 12:44:59,229 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 20
2025-05-15 12:44:59,229 - document_storage - INFO - Starting to store chunks for document ID: 20, Title: Sample Document
2025-05-15 12:44:59,229 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 12:44:59,229 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 12:44:59,229 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 12:44:59,229 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 12:45:02,220 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 12:45:02,467 - document_storage - INFO - OpenAI API request completed in 3.24 seconds
2025-05-15 12:45:02,467 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 12:45:02,467 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 12:45:02,467 - document_storage - INFO - Embedding generation completed in 3.24 seconds (1.24 texts/second)
2025-05-15 12:45:02,467 - document_storage - INFO - Successfully generated 4 embeddings in 3.24 seconds
2025-05-15 12:45:02,467 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 12:45:02,507 - document_storage - INFO - Successfully stored 4 chunks in 0.04 seconds
2025-05-15 12:45:02,508 - document_storage - INFO - Marking document ID: 20 as processed
2025-05-15 12:45:02,509 - document_storage - INFO - Document ID: 20 successfully marked as processed
2025-05-15 12:45:02,511 - document_storage - INFO - Document chunk storage process completed in 3.28 seconds for document ID: 20
2025-05-15 12:45:02,524 - document_storage - INFO - Document processing complete for ID: 20
2025-05-15 13:03:04,866 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 13:03:18,387 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 13:03:18,392 - document_storage - INFO - Document saved with ID: 21
2025-05-15 13:03:18,392 - document_storage - INFO - Processing file: OnePageContract_c8zEbuF.pdf, size: 34.76 KB, type: pdf
2025-05-15 13:03:18,392 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_c8zEbuF.pdf
2025-05-15 13:03:18,392 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_c8zEbuF.pdf
2025-05-15 13:03:18,392 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 13:03:18,392 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_c8zEbuF.pdf
2025-05-15 13:03:18,392 - document_extraction - INFO - PDF has 1 pages
2025-05-15 13:03:18,403 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_c8zEbuF.pdf
2025-05-15 13:03:18,403 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_c8zEbuF.pdf
2025-05-15 13:03:18,403 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 13:03:18,403 - document_storage - INFO - Chunking text for document ID: 21
2025-05-15 13:03:18,403 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 13:03:18,403 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 13:03:18,403 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 13:03:18,403 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 13:03:18,403 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 21
2025-05-15 13:03:18,403 - document_storage - INFO - Starting to store chunks for document ID: 21, Title: Sample Document
2025-05-15 13:03:18,403 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 13:03:18,403 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 13:03:18,403 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 13:03:18,403 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 13:03:20,100 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 13:03:20,221 - document_storage - INFO - OpenAI API request completed in 1.82 seconds
2025-05-15 13:03:20,221 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 13:03:20,221 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 13:03:20,221 - document_storage - INFO - Embedding generation completed in 1.82 seconds (2.20 texts/second)
2025-05-15 13:03:20,221 - document_storage - INFO - Successfully generated 4 embeddings in 1.82 seconds
2025-05-15 13:03:20,221 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 13:03:20,257 - document_storage - INFO - Successfully stored 4 chunks in 0.04 seconds
2025-05-15 13:03:20,257 - document_storage - INFO - Marking document ID: 21 as processed
2025-05-15 13:03:20,258 - document_storage - INFO - Document ID: 21 successfully marked as processed
2025-05-15 13:03:20,259 - document_storage - INFO - Document chunk storage process completed in 1.86 seconds for document ID: 21
2025-05-15 13:03:20,268 - document_storage - INFO - Document processing complete for ID: 21
2025-05-15 13:03:20,392 - root - INFO - Creating a new chat session for user Raj
2025-05-15 13:04:37,347 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 13:04:48,675 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 13:04:48,678 - document_storage - INFO - Document saved with ID: 22
2025-05-15 13:04:48,678 - document_storage - INFO - Processing file: OnePageContract_twq8KNb.pdf, size: 34.76 KB, type: pdf
2025-05-15 13:04:48,678 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_twq8KNb.pdf
2025-05-15 13:04:48,678 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_twq8KNb.pdf
2025-05-15 13:04:48,678 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 13:04:48,678 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_twq8KNb.pdf
2025-05-15 13:04:48,679 - document_extraction - INFO - PDF has 1 pages
2025-05-15 13:04:48,688 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_twq8KNb.pdf
2025-05-15 13:04:48,688 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_twq8KNb.pdf
2025-05-15 13:04:48,688 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 13:04:48,689 - document_storage - INFO - Chunking text for document ID: 22
2025-05-15 13:04:48,689 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 13:04:48,689 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 13:04:48,689 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 13:04:48,689 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 13:04:48,689 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 22
2025-05-15 13:04:48,689 - document_storage - INFO - Starting to store chunks for document ID: 22, Title: Sample Document
2025-05-15 13:04:48,689 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 13:04:48,689 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 13:04:48,689 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 13:04:48,689 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 13:04:49,714 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 13:04:50,008 - document_storage - INFO - OpenAI API request completed in 1.32 seconds
2025-05-15 13:04:50,009 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 13:04:50,009 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 13:04:50,009 - document_storage - INFO - Embedding generation completed in 1.32 seconds (3.03 texts/second)
2025-05-15 13:04:50,009 - document_storage - INFO - Successfully generated 4 embeddings in 1.32 seconds
2025-05-15 13:04:50,009 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 13:04:50,046 - document_storage - INFO - Successfully stored 4 chunks in 0.04 seconds
2025-05-15 13:04:50,046 - document_storage - INFO - Marking document ID: 22 as processed
2025-05-15 13:04:50,047 - document_storage - INFO - Document ID: 22 successfully marked as processed
2025-05-15 13:04:50,048 - document_storage - INFO - Document chunk storage process completed in 1.36 seconds for document ID: 22
2025-05-15 13:04:50,057 - document_storage - INFO - Document processing complete for ID: 22
2025-05-15 13:04:50,191 - root - INFO - Creating a new chat session for user Raj
2025-05-15 13:06:26,293 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 13:06:35,128 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 13:06:35,131 - document_storage - INFO - Document saved with ID: 23
2025-05-15 13:06:35,131 - document_storage - INFO - Processing file: OnePageContract_2b046Zr.pdf, size: 34.76 KB, type: pdf
2025-05-15 13:06:35,131 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_2b046Zr.pdf
2025-05-15 13:06:35,131 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_2b046Zr.pdf
2025-05-15 13:06:35,131 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 13:06:35,131 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_2b046Zr.pdf
2025-05-15 13:06:35,132 - document_extraction - INFO - PDF has 1 pages
2025-05-15 13:06:35,141 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_2b046Zr.pdf
2025-05-15 13:06:35,141 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_2b046Zr.pdf
2025-05-15 13:06:35,141 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 13:06:35,141 - document_storage - INFO - Chunking text for document ID: 23
2025-05-15 13:06:35,141 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 13:06:35,141 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 13:06:35,141 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 13:06:35,141 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 13:06:35,141 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 23
2025-05-15 13:06:35,141 - document_storage - INFO - Starting to store chunks for document ID: 23, Title: Sample Document
2025-05-15 13:06:35,141 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 13:06:35,141 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 13:06:35,142 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 13:06:35,142 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 13:06:36,400 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 13:06:36,492 - document_storage - INFO - OpenAI API request completed in 1.35 seconds
2025-05-15 13:06:36,493 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 13:06:36,493 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 13:06:36,493 - document_storage - INFO - Embedding generation completed in 1.35 seconds (2.96 texts/second)
2025-05-15 13:06:36,493 - document_storage - INFO - Successfully generated 4 embeddings in 1.35 seconds
2025-05-15 13:06:36,493 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 13:06:36,531 - document_storage - INFO - Successfully stored 4 chunks in 0.04 seconds
2025-05-15 13:06:36,531 - document_storage - INFO - Marking document ID: 23 as processed
2025-05-15 13:06:36,533 - document_storage - INFO - Document ID: 23 successfully marked as processed
2025-05-15 13:06:36,535 - document_storage - INFO - Document chunk storage process completed in 1.39 seconds for document ID: 23
2025-05-15 13:06:36,545 - document_storage - INFO - Document processing complete for ID: 23
2025-05-15 13:06:39,598 - root - INFO - Creating a new chat session for user Raj
2025-05-15 13:57:15,983 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 13:57:32,750 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 13:57:32,754 - document_storage - INFO - Document saved with ID: 24
2025-05-15 13:57:32,754 - document_storage - INFO - Processing file: OnePageContract_yX6ZYXF.pdf, size: 34.76 KB, type: pdf
2025-05-15 13:57:32,754 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_yX6ZYXF.pdf
2025-05-15 13:57:32,754 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_yX6ZYXF.pdf
2025-05-15 13:57:32,754 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 13:57:32,754 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_yX6ZYXF.pdf
2025-05-15 13:57:32,754 - document_extraction - INFO - PDF has 1 pages
2025-05-15 13:57:32,767 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_yX6ZYXF.pdf
2025-05-15 13:57:32,767 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_yX6ZYXF.pdf
2025-05-15 13:57:32,767 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 13:57:32,767 - document_storage - INFO - Chunking text for document ID: 24
2025-05-15 13:57:32,767 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 13:57:32,767 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 13:57:32,767 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 13:57:32,767 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 13:57:32,767 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 24
2025-05-15 13:57:32,767 - document_storage - INFO - Starting to store chunks for document ID: 24, Title: Sample Document
2025-05-15 13:57:32,767 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 13:57:32,767 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 13:57:32,767 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 13:57:32,767 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 13:57:34,787 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 13:57:34,834 - document_storage - INFO - OpenAI API request completed in 2.07 seconds
2025-05-15 13:57:34,834 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 13:57:34,835 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 13:57:34,835 - document_storage - INFO - Embedding generation completed in 2.07 seconds (1.93 texts/second)
2025-05-15 13:57:34,835 - document_storage - INFO - Successfully generated 4 embeddings in 2.07 seconds
2025-05-15 13:57:34,835 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 13:57:34,876 - document_storage - INFO - Successfully stored 4 chunks in 0.04 seconds
2025-05-15 13:57:34,876 - document_storage - INFO - Marking document ID: 24 as processed
2025-05-15 13:57:34,878 - document_storage - INFO - Document ID: 24 successfully marked as processed
2025-05-15 13:57:34,880 - document_storage - INFO - Document chunk storage process completed in 2.11 seconds for document ID: 24
2025-05-15 13:57:34,894 - document_storage - INFO - Document processing complete for ID: 24
2025-05-15 13:57:36,879 - root - INFO - Creating a new chat session for user Raj
2025-05-15 14:09:35,470 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 14:09:51,011 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 14:09:51,015 - document_storage - INFO - Document saved with ID: 25
2025-05-15 14:09:51,015 - document_storage - INFO - Processing file: dummy-pdf_2_ueT59ML.pdf, size: 7.30 KB, type: pdf
2025-05-15 14:09:51,015 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_ueT59ML.pdf
2025-05-15 14:09:51,015 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_ueT59ML.pdf
2025-05-15 14:09:51,015 - document_extraction - INFO - File type: .pdf, Size: 0.01 MB
2025-05-15 14:09:51,015 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_ueT59ML.pdf
2025-05-15 14:09:51,016 - document_extraction - INFO - PDF has 1 pages
2025-05-15 14:09:51,016 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_ueT59ML.pdf
2025-05-15 14:09:51,016 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_ueT59ML.pdf
2025-05-15 14:09:51,016 - document_storage - INFO - Text extraction complete. Extracted 20 characters
2025-05-15 14:09:51,016 - document_storage - INFO - Chunking text for document ID: 25
2025-05-15 14:09:51,016 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 14:09:51,016 - document_extraction - INFO - Input text length: 20 characters
2025-05-15 14:09:51,016 - document_extraction - INFO - Text chunking complete. Created 1 chunks
2025-05-15 14:09:51,016 - document_storage - INFO - Text chunking complete. Created 1 chunks
2025-05-15 14:09:51,016 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 25
2025-05-15 14:09:51,017 - document_storage - INFO - Starting to store chunks for document ID: 25, Title: Sample Document
2025-05-15 14:09:51,017 - document_storage - INFO - Processing 1 chunks to store in database
2025-05-15 14:09:51,017 - document_storage - INFO - Generating embeddings for 1 chunks
2025-05-15 14:09:51,017 - document_storage - INFO - Generating embeddings for 1 texts (~3 tokens)
2025-05-15 14:09:51,017 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 14:09:53,082 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 14:09:53,084 - document_storage - INFO - OpenAI API request completed in 2.07 seconds
2025-05-15 14:09:53,084 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 14:09:53,084 - document_storage - INFO - Token usage: 3 prompt tokens, 3 total tokens
2025-05-15 14:09:53,085 - document_storage - INFO - Embedding generation completed in 2.07 seconds (0.48 texts/second)
2025-05-15 14:09:53,085 - document_storage - INFO - Successfully generated 1 embeddings in 2.07 seconds
2025-05-15 14:09:53,085 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 14:09:53,097 - document_storage - INFO - Successfully stored 1 chunks in 0.01 seconds
2025-05-15 14:09:53,097 - document_storage - INFO - Marking document ID: 25 as processed
2025-05-15 14:09:53,098 - document_storage - INFO - Document ID: 25 successfully marked as processed
2025-05-15 14:09:53,099 - document_storage - INFO - Document chunk storage process completed in 2.08 seconds for document ID: 25
2025-05-15 14:09:53,109 - document_storage - INFO - Document processing complete for ID: 25
2025-05-15 14:09:55,575 - root - INFO - Creating a new chat session for user Raj
2025-05-15 14:20:07,332 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 14:20:53,812 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 14:20:53,817 - document_storage - INFO - Document saved with ID: 26
2025-05-15 14:20:53,817 - document_storage - INFO - Processing file: OnePageContract_Md7GrAv.pdf, size: 34.76 KB, type: pdf
2025-05-15 14:20:53,817 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Md7GrAv.pdf
2025-05-15 14:20:53,817 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Md7GrAv.pdf
2025-05-15 14:20:53,817 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 14:20:53,817 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Md7GrAv.pdf
2025-05-15 14:20:53,817 - document_extraction - INFO - PDF has 1 pages
2025-05-15 14:20:53,828 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Md7GrAv.pdf
2025-05-15 14:20:53,828 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Md7GrAv.pdf
2025-05-15 14:20:53,828 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 14:20:53,828 - document_storage - INFO - Chunking text for document ID: 26
2025-05-15 14:20:53,828 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 14:20:53,828 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 14:20:53,828 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 14:20:53,828 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 14:20:53,828 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 26
2025-05-15 14:20:53,828 - document_storage - INFO - Starting to store chunks for document ID: 26, Title: Sample Document
2025-05-15 14:20:53,828 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 14:20:53,828 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 14:20:53,828 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 14:20:53,828 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 14:20:54,636 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 14:20:54,881 - document_storage - INFO - OpenAI API request completed in 1.05 seconds
2025-05-15 14:20:54,881 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 14:20:54,881 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 14:20:54,881 - document_storage - INFO - Embedding generation completed in 1.05 seconds (3.80 texts/second)
2025-05-15 14:20:54,881 - document_storage - INFO - Successfully generated 4 embeddings in 1.05 seconds
2025-05-15 14:20:54,882 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 14:20:54,915 - document_storage - INFO - Successfully stored 4 chunks in 0.03 seconds
2025-05-15 14:20:54,915 - document_storage - INFO - Marking document ID: 26 as processed
2025-05-15 14:20:54,916 - document_storage - INFO - Document ID: 26 successfully marked as processed
2025-05-15 14:20:54,917 - document_storage - INFO - Document chunk storage process completed in 1.09 seconds for document ID: 26
2025-05-15 14:20:54,924 - document_storage - INFO - Document processing complete for ID: 26
2025-05-15 14:20:56,981 - root - INFO - Creating a new chat session for user Raj
2025-05-15 14:22:19,054 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 14:22:27,382 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 14:22:27,387 - document_storage - INFO - Document saved with ID: 27
2025-05-15 14:22:27,387 - document_storage - INFO - Processing file: OnePageContract_LII1quU.pdf, size: 34.76 KB, type: pdf
2025-05-15 14:22:27,387 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_LII1quU.pdf
2025-05-15 14:22:27,387 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_LII1quU.pdf
2025-05-15 14:22:27,387 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 14:22:27,387 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_LII1quU.pdf
2025-05-15 14:22:27,387 - document_extraction - INFO - PDF has 1 pages
2025-05-15 14:22:27,397 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_LII1quU.pdf
2025-05-15 14:22:27,397 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_LII1quU.pdf
2025-05-15 14:22:27,397 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 14:22:27,397 - document_storage - INFO - Chunking text for document ID: 27
2025-05-15 14:22:27,397 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 14:22:27,397 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 14:22:27,398 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 14:22:27,398 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 14:22:27,398 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 27
2025-05-15 14:22:27,398 - document_storage - INFO - Starting to store chunks for document ID: 27, Title: Sample Document
2025-05-15 14:22:27,398 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 14:22:27,398 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 14:22:27,398 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 14:22:27,398 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 14:22:28,794 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 14:22:29,066 - document_storage - INFO - OpenAI API request completed in 1.67 seconds
2025-05-15 14:22:29,066 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 14:22:29,066 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 14:22:29,067 - document_storage - INFO - Embedding generation completed in 1.67 seconds (2.40 texts/second)
2025-05-15 14:22:29,067 - document_storage - INFO - Successfully generated 4 embeddings in 1.67 seconds
2025-05-15 14:22:29,067 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 14:22:29,109 - document_storage - INFO - Successfully stored 4 chunks in 0.04 seconds
2025-05-15 14:22:29,109 - document_storage - INFO - Marking document ID: 27 as processed
2025-05-15 14:22:29,111 - document_storage - INFO - Document ID: 27 successfully marked as processed
2025-05-15 14:22:29,112 - document_storage - INFO - Document chunk storage process completed in 1.71 seconds for document ID: 27
2025-05-15 14:22:29,125 - document_storage - INFO - Document processing complete for ID: 27
2025-05-15 14:22:31,231 - root - INFO - Creating a new chat session for user Raj
2025-05-15 14:25:29,810 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 14:25:29,814 - document_storage - INFO - Document saved with ID: 28
2025-05-15 14:25:29,814 - document_storage - INFO - Processing file: OnePageContract_5UV2yPM.pdf, size: 34.76 KB, type: pdf
2025-05-15 14:25:29,814 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_5UV2yPM.pdf
2025-05-15 14:25:29,814 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_5UV2yPM.pdf
2025-05-15 14:25:29,815 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 14:25:29,815 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_5UV2yPM.pdf
2025-05-15 14:25:29,815 - document_extraction - INFO - PDF has 1 pages
2025-05-15 14:25:29,825 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_5UV2yPM.pdf
2025-05-15 14:25:29,825 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_5UV2yPM.pdf
2025-05-15 14:25:29,825 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 14:25:29,825 - document_storage - INFO - Chunking text for document ID: 28
2025-05-15 14:25:29,825 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 14:25:29,825 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 14:25:29,825 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 14:25:29,825 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 14:25:29,825 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 28
2025-05-15 14:25:29,825 - document_storage - INFO - Starting to store chunks for document ID: 28, Title: Sample Document
2025-05-15 14:25:29,825 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 14:25:29,825 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 14:25:29,825 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 14:25:29,825 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 14:25:31,024 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 14:25:31,326 - document_storage - INFO - OpenAI API request completed in 1.50 seconds
2025-05-15 14:25:31,326 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 14:25:31,326 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 14:25:31,326 - document_storage - INFO - Embedding generation completed in 1.50 seconds (2.67 texts/second)
2025-05-15 14:25:31,326 - document_storage - INFO - Successfully generated 4 embeddings in 1.50 seconds
2025-05-15 14:25:31,326 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 14:25:31,366 - document_storage - INFO - Successfully stored 4 chunks in 0.04 seconds
2025-05-15 14:25:31,366 - document_storage - INFO - Marking document ID: 28 as processed
2025-05-15 14:25:31,368 - document_storage - INFO - Document ID: 28 successfully marked as processed
2025-05-15 14:25:31,369 - document_storage - INFO - Document chunk storage process completed in 1.54 seconds for document ID: 28
2025-05-15 14:25:31,379 - document_storage - INFO - Document processing complete for ID: 28
2025-05-15 14:25:33,547 - root - INFO - Creating a new chat session for user Raj
2025-05-15 17:19:53,556 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 17:19:53,561 - document_storage - INFO - Document saved with ID: 29
2025-05-15 17:19:53,561 - document_storage - INFO - Processing file: OnePageContract_Gmpuuyl.pdf, size: 34.76 KB, type: pdf
2025-05-15 17:19:53,561 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Gmpuuyl.pdf
2025-05-15 17:19:53,561 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Gmpuuyl.pdf
2025-05-15 17:19:53,561 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 17:19:53,561 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Gmpuuyl.pdf
2025-05-15 17:19:53,561 - document_extraction - INFO - PDF has 1 pages
2025-05-15 17:19:53,597 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Gmpuuyl.pdf
2025-05-15 17:19:53,597 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Gmpuuyl.pdf
2025-05-15 17:19:53,597 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 17:19:53,597 - document_storage - INFO - Chunking text for document ID: 29
2025-05-15 17:19:53,597 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 17:19:53,597 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 17:19:53,597 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 17:19:53,597 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 17:19:53,597 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 29
2025-05-15 17:19:53,597 - document_storage - INFO - Starting to store chunks for document ID: 29, Title: Sample Document
2025-05-15 17:19:53,597 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 17:19:53,597 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 17:19:53,598 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 17:19:53,598 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 17:19:55,518 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 17:19:55,700 - document_storage - INFO - OpenAI API request completed in 2.10 seconds
2025-05-15 17:19:55,700 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 17:19:55,700 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 17:19:55,700 - document_storage - INFO - Embedding generation completed in 2.10 seconds (1.90 texts/second)
2025-05-15 17:19:55,701 - document_storage - INFO - Successfully generated 4 embeddings in 2.10 seconds
2025-05-15 17:19:55,701 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 17:19:55,743 - document_storage - INFO - Successfully stored 4 chunks in 0.04 seconds
2025-05-15 17:19:55,744 - document_storage - INFO - Marking document ID: 29 as processed
2025-05-15 17:19:55,745 - document_storage - INFO - Document ID: 29 successfully marked as processed
2025-05-15 17:19:55,746 - document_storage - INFO - Document chunk storage process completed in 2.15 seconds for document ID: 29
2025-05-15 17:19:55,747 - document_storage - INFO - Document processing complete for ID: 29
2025-05-15 17:19:58,544 - root - INFO - Creating a new chat session for user Raj
2025-05-15 17:25:36,531 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 17:25:36,535 - document_storage - INFO - Document saved with ID: 30
2025-05-15 17:25:36,535 - document_storage - INFO - Processing file: OnePageContract_5TxC357.pdf, size: 34.76 KB, type: pdf
2025-05-15 17:25:36,535 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_5TxC357.pdf
2025-05-15 17:25:36,535 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_5TxC357.pdf
2025-05-15 17:25:36,535 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 17:25:36,535 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_5TxC357.pdf
2025-05-15 17:25:36,535 - document_extraction - INFO - PDF has 1 pages
2025-05-15 17:25:36,545 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_5TxC357.pdf
2025-05-15 17:25:36,545 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_5TxC357.pdf
2025-05-15 17:25:36,545 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 17:25:36,545 - document_storage - INFO - Chunking text for document ID: 30
2025-05-15 17:25:36,545 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 17:25:36,545 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 17:25:36,545 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 17:25:36,545 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 17:25:36,545 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 30
2025-05-15 17:25:36,545 - document_storage - INFO - Starting to store chunks for document ID: 30, Title: Sample Document
2025-05-15 17:25:36,545 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 17:25:36,545 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 17:25:36,546 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 17:25:36,546 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 17:25:37,553 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 17:25:37,706 - document_storage - INFO - OpenAI API request completed in 1.16 seconds
2025-05-15 17:25:37,706 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 17:25:37,706 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 17:25:37,706 - document_storage - INFO - Embedding generation completed in 1.16 seconds (3.45 texts/second)
2025-05-15 17:25:37,706 - document_storage - INFO - Successfully generated 4 embeddings in 1.16 seconds
2025-05-15 17:25:37,706 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 17:25:37,740 - document_storage - INFO - Successfully stored 4 chunks in 0.03 seconds
2025-05-15 17:25:37,740 - document_storage - INFO - Marking document ID: 30 as processed
2025-05-15 17:25:37,741 - document_storage - INFO - Document ID: 30 successfully marked as processed
2025-05-15 17:25:37,742 - document_storage - INFO - Document chunk storage process completed in 1.20 seconds for document ID: 30
2025-05-15 17:25:37,750 - document_storage - INFO - Document processing complete for ID: 30
2025-05-15 17:25:40,185 - root - INFO - Creating a new chat session for user Raj
2025-05-15 17:26:18,653 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 17:26:22,484 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 17:26:22,487 - document_storage - INFO - Document saved with ID: 31
2025-05-15 17:26:22,487 - document_storage - INFO - Processing file: OnePageContract_vi98rV8.pdf, size: 34.76 KB, type: pdf
2025-05-15 17:26:22,487 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_vi98rV8.pdf
2025-05-15 17:26:22,487 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_vi98rV8.pdf
2025-05-15 17:26:22,487 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 17:26:22,487 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_vi98rV8.pdf
2025-05-15 17:26:22,488 - document_extraction - INFO - PDF has 1 pages
2025-05-15 17:26:22,516 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_vi98rV8.pdf
2025-05-15 17:26:22,516 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_vi98rV8.pdf
2025-05-15 17:26:22,516 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 17:26:22,516 - document_storage - INFO - Chunking text for document ID: 31
2025-05-15 17:26:22,516 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 17:26:22,516 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 17:26:22,516 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 17:26:22,517 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 17:26:22,517 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 31
2025-05-15 17:26:22,517 - document_storage - INFO - Starting to store chunks for document ID: 31, Title: Sample Document
2025-05-15 17:26:22,517 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 17:26:22,517 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 17:26:22,517 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 17:26:22,517 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 17:26:23,621 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 17:26:23,765 - document_storage - INFO - OpenAI API request completed in 1.25 seconds
2025-05-15 17:26:23,765 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 17:26:23,765 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 17:26:23,765 - document_storage - INFO - Embedding generation completed in 1.25 seconds (3.20 texts/second)
2025-05-15 17:26:23,766 - document_storage - INFO - Successfully generated 4 embeddings in 1.25 seconds
2025-05-15 17:26:23,766 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 17:26:23,805 - document_storage - INFO - Successfully stored 4 chunks in 0.04 seconds
2025-05-15 17:26:23,806 - document_storage - INFO - Marking document ID: 31 as processed
2025-05-15 17:26:23,807 - document_storage - INFO - Document ID: 31 successfully marked as processed
2025-05-15 17:26:23,809 - document_storage - INFO - Document chunk storage process completed in 1.29 seconds for document ID: 31
2025-05-15 17:26:23,809 - document_storage - INFO - Document processing complete for ID: 31
2025-05-15 17:26:25,549 - root - INFO - Creating a new chat session for user Raj
2025-05-15 17:34:19,431 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 17:34:19,435 - document_storage - INFO - Document saved with ID: 32
2025-05-15 17:34:19,436 - document_storage - INFO - Processing file: OnePageContract_m1IvCCX.pdf, size: 34.76 KB, type: pdf
2025-05-15 17:34:19,436 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_m1IvCCX.pdf
2025-05-15 17:34:19,436 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_m1IvCCX.pdf
2025-05-15 17:34:19,436 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 17:34:19,436 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_m1IvCCX.pdf
2025-05-15 17:34:19,436 - document_extraction - INFO - PDF has 1 pages
2025-05-15 17:34:19,448 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_m1IvCCX.pdf
2025-05-15 17:34:19,448 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_m1IvCCX.pdf
2025-05-15 17:34:19,449 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 17:34:19,449 - document_storage - INFO - Chunking text for document ID: 32
2025-05-15 17:34:19,449 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 17:34:19,449 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 17:34:19,449 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 17:34:19,449 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 17:34:19,449 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 32
2025-05-15 17:34:19,449 - document_storage - INFO - Starting to store chunks for document ID: 32, Title: Sample Document
2025-05-15 17:34:19,449 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 17:34:19,449 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 17:34:19,449 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 17:34:19,449 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 17:34:20,520 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 17:34:20,798 - document_storage - INFO - OpenAI API request completed in 1.35 seconds
2025-05-15 17:34:20,799 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 17:34:20,799 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 17:34:20,799 - document_storage - INFO - Embedding generation completed in 1.35 seconds (2.96 texts/second)
2025-05-15 17:34:20,799 - document_storage - INFO - Successfully generated 4 embeddings in 1.35 seconds
2025-05-15 17:34:20,799 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 17:34:20,841 - document_storage - INFO - Successfully stored 4 chunks in 0.04 seconds
2025-05-15 17:34:20,842 - document_storage - INFO - Marking document ID: 32 as processed
2025-05-15 17:34:20,843 - document_storage - INFO - Document ID: 32 successfully marked as processed
2025-05-15 17:34:20,844 - document_storage - INFO - Document chunk storage process completed in 1.39 seconds for document ID: 32
2025-05-15 17:34:20,844 - document_storage - INFO - Document processing complete for ID: 32
2025-05-15 17:34:26,406 - root - INFO - Creating a new chat session for user Raj
2025-05-15 17:44:45,749 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 17:44:55,093 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 17:44:55,097 - document_storage - INFO - Document saved with ID: 33
2025-05-15 17:44:55,097 - document_storage - INFO - Processing file: dummy-pdf_2_Fctbgqx.pdf, size: 7.30 KB, type: pdf
2025-05-15 17:44:55,097 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_Fctbgqx.pdf
2025-05-15 17:44:55,098 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_Fctbgqx.pdf
2025-05-15 17:44:55,098 - document_extraction - INFO - File type: .pdf, Size: 0.01 MB
2025-05-15 17:44:55,098 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_Fctbgqx.pdf
2025-05-15 17:44:55,098 - document_extraction - INFO - PDF has 1 pages
2025-05-15 17:44:55,099 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_Fctbgqx.pdf
2025-05-15 17:44:55,099 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_Fctbgqx.pdf
2025-05-15 17:44:55,099 - document_storage - INFO - Text extraction complete. Extracted 20 characters
2025-05-15 17:44:55,099 - document_storage - INFO - Chunking text for document ID: 33
2025-05-15 17:44:55,099 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 17:44:55,099 - document_extraction - INFO - Input text length: 20 characters
2025-05-15 17:44:55,099 - document_extraction - INFO - Text chunking complete. Created 1 chunks
2025-05-15 17:44:55,099 - document_storage - INFO - Text chunking complete. Created 1 chunks
2025-05-15 17:44:55,099 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 33
2025-05-15 17:44:55,099 - document_storage - INFO - Starting to store chunks for document ID: 33, Title: Sample Document
2025-05-15 17:44:55,099 - document_storage - INFO - Processing 1 chunks to store in database
2025-05-15 17:44:55,099 - document_storage - INFO - Generating embeddings for 1 chunks
2025-05-15 17:44:55,099 - document_storage - INFO - Generating embeddings for 1 texts (~3 tokens)
2025-05-15 17:44:55,099 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 17:44:56,019 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 17:44:56,022 - document_storage - INFO - OpenAI API request completed in 0.92 seconds
2025-05-15 17:44:56,022 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 17:44:56,022 - document_storage - INFO - Token usage: 3 prompt tokens, 3 total tokens
2025-05-15 17:44:56,022 - document_storage - INFO - Embedding generation completed in 0.92 seconds (1.08 texts/second)
2025-05-15 17:44:56,022 - document_storage - INFO - Successfully generated 1 embeddings in 0.92 seconds
2025-05-15 17:44:56,022 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 17:44:56,035 - document_storage - INFO - Successfully stored 1 chunks in 0.01 seconds
2025-05-15 17:44:56,035 - document_storage - INFO - Marking document ID: 33 as processed
2025-05-15 17:44:56,037 - document_storage - INFO - Document ID: 33 successfully marked as processed
2025-05-15 17:44:56,039 - document_storage - INFO - Document chunk storage process completed in 0.94 seconds for document ID: 33
2025-05-15 17:44:56,052 - document_storage - INFO - Document processing complete for ID: 33
2025-05-15 17:45:01,232 - root - INFO - Creating a new chat session for user Raj
2025-05-15 17:45:23,692 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 17:45:23,695 - root - INFO - Received a question for ChatSession ID 15
2025-05-15 17:45:23,695 - root - INFO - Question: how many words are there in the file
2025-05-15 17:45:23,698 - root - INFO - Running similarity search for document_id=33, top_k=5
2025-05-15 17:45:23,698 - document_storage - INFO - Generating embeddings for 1 texts (~8 tokens)
2025-05-15 17:45:23,699 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 17:45:24,621 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 17:45:24,623 - document_storage - INFO - OpenAI API request completed in 0.92 seconds
2025-05-15 17:45:24,623 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 17:45:24,623 - document_storage - INFO - Token usage: 8 prompt tokens, 8 total tokens
2025-05-15 17:45:24,623 - document_storage - INFO - Embedding generation completed in 0.92 seconds (1.08 texts/second)
2025-05-15 17:45:24,628 - root - INFO - Retrieved 1 chunks for document_id=33
2025-05-15 17:45:24,631 - root - INFO - Top similarity score: 0.2054258048063915
2025-05-15 17:45:24,631 - root - INFO - Returning top 1 chunks
2025-05-15 17:45:24,631 - root - INFO - Found 1 relevant chunks
2025-05-15 17:45:25,916 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 17:45:25,923 - root - INFO - Generated response using OpenAI
2025-05-15 17:51:09,924 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 17:51:09,928 - root - INFO - Received a question for ChatSession ID 15
2025-05-15 17:51:09,929 - root - INFO - Question: how many words are there in the file
2025-05-15 17:51:09,932 - root - INFO - Running similarity search for document_id=33, top_k=5
2025-05-15 17:51:09,933 - document_storage - INFO - Generating embeddings for 1 texts (~8 tokens)
2025-05-15 17:51:09,933 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 17:51:12,828 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 17:51:12,833 - document_storage - INFO - OpenAI API request completed in 2.90 seconds
2025-05-15 17:51:12,833 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 17:51:12,833 - document_storage - INFO - Token usage: 8 prompt tokens, 8 total tokens
2025-05-15 17:51:12,833 - document_storage - INFO - Embedding generation completed in 2.90 seconds (0.34 texts/second)
2025-05-15 17:51:12,838 - root - INFO - Retrieved 1 chunks for document_id=33
2025-05-15 17:51:12,842 - root - INFO - Top similarity score: 0.2054258048063915
2025-05-15 17:51:12,842 - root - INFO - Returning top 1 chunks
2025-05-15 17:51:12,842 - root - INFO - Found 1 relevant chunks
2025-05-15 17:51:14,177 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 17:51:14,184 - root - INFO - Generated response using OpenAI
2025-05-15 17:53:06,819 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 17:53:06,823 - root - INFO - Received a question for ChatSession ID 15
2025-05-15 17:53:06,823 - root - INFO - Question: how many words are there in the file
2025-05-15 17:53:06,826 - root - INFO - Running similarity search for document_id=33, top_k=5
2025-05-15 17:53:06,826 - document_storage - INFO - Generating embeddings for 1 texts (~8 tokens)
2025-05-15 17:53:06,826 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 17:53:08,421 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 17:53:08,426 - document_storage - INFO - OpenAI API request completed in 1.60 seconds
2025-05-15 17:53:08,426 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 17:53:08,426 - document_storage - INFO - Token usage: 8 prompt tokens, 8 total tokens
2025-05-15 17:53:08,426 - document_storage - INFO - Embedding generation completed in 1.60 seconds (0.62 texts/second)
2025-05-15 17:53:08,429 - root - INFO - Retrieved 1 chunks for document_id=33
2025-05-15 17:53:08,432 - root - INFO - Top similarity score: 0.2054258048063915
2025-05-15 17:53:08,432 - root - INFO - Returning top 1 chunks
2025-05-15 17:53:08,433 - root - INFO - Found 1 relevant chunks
2025-05-15 17:53:09,318 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 17:53:09,321 - root - INFO - Generated response using OpenAI
2025-05-15 17:58:01,693 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 17:58:01,697 - root - INFO - Received a question for ChatSession ID 15
2025-05-15 17:58:01,698 - root - INFO - Question: how many words are there in the file
2025-05-15 17:58:01,701 - root - INFO - Running similarity search for document_id=33, top_k=5
2025-05-15 17:58:01,702 - document_storage - INFO - Generating embeddings for 1 texts (~8 tokens)
2025-05-15 17:58:01,702 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 17:58:02,522 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 17:58:02,526 - document_storage - INFO - OpenAI API request completed in 0.82 seconds
2025-05-15 17:58:02,526 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 17:58:02,526 - document_storage - INFO - Token usage: 8 prompt tokens, 8 total tokens
2025-05-15 17:58:02,526 - document_storage - INFO - Embedding generation completed in 0.82 seconds (1.21 texts/second)
2025-05-15 17:58:02,530 - root - INFO - Retrieved 1 chunks for document_id=33
2025-05-15 17:58:02,534 - root - INFO - Top similarity score: 0.2054258048063915
2025-05-15 17:58:02,535 - root - INFO - Returning top 1 chunks
2025-05-15 17:58:02,535 - root - INFO - Found 1 relevant chunks
2025-05-15 17:58:03,497 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 17:58:03,500 - root - INFO - Generated response using OpenAI
2025-05-15 18:01:25,141 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 18:01:25,145 - root - INFO - Received a question for ChatSession ID 15
2025-05-15 18:01:25,146 - root - INFO - Question: how many words are there in the file
2025-05-15 18:01:25,150 - root - INFO - Running similarity search for document_id=33, top_k=5
2025-05-15 18:01:25,153 - document_storage - INFO - Generating embeddings for 1 texts (~8 tokens)
2025-05-15 18:01:25,153 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 18:01:25,982 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 18:01:25,991 - document_storage - INFO - OpenAI API request completed in 0.84 seconds
2025-05-15 18:01:25,991 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 18:01:25,991 - document_storage - INFO - Token usage: 8 prompt tokens, 8 total tokens
2025-05-15 18:01:25,992 - document_storage - INFO - Embedding generation completed in 0.84 seconds (1.19 texts/second)
2025-05-15 18:01:25,995 - root - INFO - Retrieved 1 chunks for document_id=33
2025-05-15 18:01:25,999 - root - INFO - Top similarity score: 0.2054438478722341
2025-05-15 18:01:25,999 - root - INFO - Returning top 1 chunks
2025-05-15 18:01:25,999 - root - INFO - Found 1 relevant chunks
2025-05-15 18:01:26,770 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 18:01:26,787 - root - INFO - Generated response using OpenAI
2025-05-15 18:04:04,947 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 18:04:15,082 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 18:04:15,085 - document_storage - INFO - Document saved with ID: 34
2025-05-15 18:04:15,085 - document_storage - INFO - Processing file: dummy-pdf_2_lEoKD8I.pdf, size: 7.30 KB, type: pdf
2025-05-15 18:04:15,085 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_lEoKD8I.pdf
2025-05-15 18:04:15,085 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_lEoKD8I.pdf
2025-05-15 18:04:15,085 - document_extraction - INFO - File type: .pdf, Size: 0.01 MB
2025-05-15 18:04:15,085 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_lEoKD8I.pdf
2025-05-15 18:04:15,087 - document_extraction - INFO - PDF has 1 pages
2025-05-15 18:04:15,087 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_lEoKD8I.pdf
2025-05-15 18:04:15,087 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_lEoKD8I.pdf
2025-05-15 18:04:15,087 - document_storage - INFO - Text extraction complete. Extracted 20 characters
2025-05-15 18:04:15,087 - document_storage - INFO - Chunking text for document ID: 34
2025-05-15 18:04:15,087 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 18:04:15,087 - document_extraction - INFO - Input text length: 20 characters
2025-05-15 18:04:15,087 - document_extraction - INFO - Text chunking complete. Created 1 chunks
2025-05-15 18:04:15,087 - document_storage - INFO - Text chunking complete. Created 1 chunks
2025-05-15 18:04:15,087 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 34
2025-05-15 18:04:15,087 - document_storage - INFO - Starting to store chunks for document ID: 34, Title: Sample Document
2025-05-15 18:04:15,087 - document_storage - INFO - Processing 1 chunks to store in database
2025-05-15 18:04:15,087 - document_storage - INFO - Generating embeddings for 1 chunks
2025-05-15 18:04:15,087 - document_storage - INFO - Generating embeddings for 1 texts (~3 tokens)
2025-05-15 18:04:15,087 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 18:04:15,949 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 18:04:15,953 - document_storage - INFO - OpenAI API request completed in 0.87 seconds
2025-05-15 18:04:15,954 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 18:04:15,954 - document_storage - INFO - Token usage: 3 prompt tokens, 3 total tokens
2025-05-15 18:04:15,954 - document_storage - INFO - Embedding generation completed in 0.87 seconds (1.15 texts/second)
2025-05-15 18:04:15,954 - document_storage - INFO - Successfully generated 1 embeddings in 0.87 seconds
2025-05-15 18:04:15,954 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 18:04:15,964 - document_storage - INFO - Successfully stored 1 chunks in 0.01 seconds
2025-05-15 18:04:15,965 - document_storage - INFO - Marking document ID: 34 as processed
2025-05-15 18:04:15,967 - document_storage - INFO - Document ID: 34 successfully marked as processed
2025-05-15 18:04:15,968 - document_storage - INFO - Document chunk storage process completed in 0.88 seconds for document ID: 34
2025-05-15 18:04:15,968 - document_storage - INFO - Document processing complete for ID: 34
2025-05-15 18:04:17,598 - root - INFO - Creating a new chat session for user Raj
2025-05-15 18:04:27,641 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 18:04:27,643 - root - INFO - Received a question for ChatSession ID 16
2025-05-15 18:04:27,643 - root - INFO - Question: HI
2025-05-15 18:04:27,645 - root - INFO - Running similarity search for document_id=34, top_k=5
2025-05-15 18:04:27,646 - document_storage - INFO - Generating embeddings for 1 texts (~1 tokens)
2025-05-15 18:04:27,646 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 18:04:28,542 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 18:04:28,553 - document_storage - INFO - OpenAI API request completed in 0.91 seconds
2025-05-15 18:04:28,553 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 18:04:28,553 - document_storage - INFO - Token usage: 1 prompt tokens, 1 total tokens
2025-05-15 18:04:28,553 - document_storage - INFO - Embedding generation completed in 0.91 seconds (1.10 texts/second)
2025-05-15 18:04:28,557 - root - INFO - Retrieved 1 chunks for document_id=34
2025-05-15 18:04:28,563 - root - INFO - Top similarity score: 0.1785419555195242
2025-05-15 18:04:28,563 - root - INFO - Returning top 1 chunks
2025-05-15 18:04:28,564 - root - INFO - Found 1 relevant chunks
2025-05-15 18:04:29,480 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 18:04:29,485 - root - INFO - Generated response using OpenAI
2025-05-15 18:06:01,302 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 18:06:11,203 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 18:06:11,207 - document_storage - INFO - Document saved with ID: 35
2025-05-15 18:06:11,207 - document_storage - INFO - Processing file: dummy-pdf_2_oO1vfle.pdf, size: 7.30 KB, type: pdf
2025-05-15 18:06:11,207 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_oO1vfle.pdf
2025-05-15 18:06:11,207 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_oO1vfle.pdf
2025-05-15 18:06:11,207 - document_extraction - INFO - File type: .pdf, Size: 0.01 MB
2025-05-15 18:06:11,207 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_oO1vfle.pdf
2025-05-15 18:06:11,207 - document_extraction - INFO - PDF has 1 pages
2025-05-15 18:06:11,208 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_oO1vfle.pdf
2025-05-15 18:06:11,208 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/dummy-pdf_2_oO1vfle.pdf
2025-05-15 18:06:11,208 - document_storage - INFO - Text extraction complete. Extracted 20 characters
2025-05-15 18:06:11,208 - document_storage - INFO - Chunking text for document ID: 35
2025-05-15 18:06:11,208 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 18:06:11,208 - document_extraction - INFO - Input text length: 20 characters
2025-05-15 18:06:11,208 - document_extraction - INFO - Text chunking complete. Created 1 chunks
2025-05-15 18:06:11,208 - document_storage - INFO - Text chunking complete. Created 1 chunks
2025-05-15 18:06:11,208 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 35
2025-05-15 18:06:11,208 - document_storage - INFO - Starting to store chunks for document ID: 35, Title: Sample Document
2025-05-15 18:06:11,208 - document_storage - INFO - Processing 1 chunks to store in database
2025-05-15 18:06:11,209 - document_storage - INFO - Generating embeddings for 1 chunks
2025-05-15 18:06:11,209 - document_storage - INFO - Generating embeddings for 1 texts (~3 tokens)
2025-05-15 18:06:11,209 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 18:06:12,085 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 18:06:12,091 - document_storage - INFO - OpenAI API request completed in 0.88 seconds
2025-05-15 18:06:12,092 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 18:06:12,092 - document_storage - INFO - Token usage: 3 prompt tokens, 3 total tokens
2025-05-15 18:06:12,092 - document_storage - INFO - Embedding generation completed in 0.88 seconds (1.13 texts/second)
2025-05-15 18:06:12,092 - document_storage - INFO - Successfully generated 1 embeddings in 0.88 seconds
2025-05-15 18:06:12,092 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 18:06:12,106 - document_storage - INFO - Successfully stored 1 chunks in 0.01 seconds
2025-05-15 18:06:12,107 - document_storage - INFO - Marking document ID: 35 as processed
2025-05-15 18:06:12,109 - document_storage - INFO - Document ID: 35 successfully marked as processed
2025-05-15 18:06:12,110 - document_storage - INFO - Document chunk storage process completed in 0.90 seconds for document ID: 35
2025-05-15 18:06:12,111 - document_storage - INFO - Document processing complete for ID: 35
2025-05-15 18:06:13,966 - root - INFO - Creating a new chat session for user Raj
2025-05-15 18:06:22,093 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 18:06:22,095 - root - INFO - Received a question for ChatSession ID 17
2025-05-15 18:06:22,095 - root - INFO - Question: Hi
2025-05-15 18:06:22,098 - root - INFO - Running similarity search for document_id=35, top_k=5
2025-05-15 18:06:22,098 - document_storage - INFO - Generating embeddings for 1 texts (~1 tokens)
2025-05-15 18:06:22,098 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 18:06:24,768 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 18:06:24,775 - document_storage - INFO - OpenAI API request completed in 2.68 seconds
2025-05-15 18:06:24,775 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 18:06:24,775 - document_storage - INFO - Token usage: 1 prompt tokens, 1 total tokens
2025-05-15 18:06:24,775 - document_storage - INFO - Embedding generation completed in 2.68 seconds (0.37 texts/second)
2025-05-15 18:06:24,778 - root - INFO - Retrieved 1 chunks for document_id=35
2025-05-15 18:06:24,782 - root - INFO - Top similarity score: 0.14620617675521907
2025-05-15 18:06:24,782 - root - INFO - Returning top 1 chunks
2025-05-15 18:06:24,782 - root - INFO - Found 1 relevant chunks
2025-05-15 18:06:25,635 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 18:06:25,643 - root - INFO - Generated response using OpenAI
2025-05-15 18:07:11,068 - django.request - WARNING - Not Found: /.well-known/appspecific/com.chrome.devtools.json
2025-05-15 18:08:03,770 - document_storage - INFO - Creating new document for user ID: 2
2025-05-15 18:08:03,774 - document_storage - INFO - Document saved with ID: 36
2025-05-15 18:08:03,774 - document_storage - INFO - Processing file: OnePageContract_Q8Tu7EH.pdf, size: 34.76 KB, type: pdf
2025-05-15 18:08:03,774 - document_storage - INFO - Extracting text from file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Q8Tu7EH.pdf
2025-05-15 18:08:03,774 - document_extraction - INFO - Starting text extraction for file: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Q8Tu7EH.pdf
2025-05-15 18:08:03,774 - document_extraction - INFO - File type: .pdf, Size: 0.03 MB
2025-05-15 18:08:03,774 - document_extraction - INFO - Extracting text from PDF: /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Q8Tu7EH.pdf
2025-05-15 18:08:03,775 - document_extraction - INFO - PDF has 1 pages
2025-05-15 18:08:03,788 - document_extraction - INFO - PDF extraction complete for /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Q8Tu7EH.pdf
2025-05-15 18:08:03,789 - document_extraction - INFO - Successfully extracted text from /Users/rajatmittal/Personal Projects/File_chat_app/file_chatbot/media/documents/OnePageContract_Q8Tu7EH.pdf
2025-05-15 18:08:03,789 - document_storage - INFO - Text extraction complete. Extracted 2491 characters
2025-05-15 18:08:03,789 - document_storage - INFO - Chunking text for document ID: 36
2025-05-15 18:08:03,789 - document_extraction - INFO - Starting text chunking with chunk_size=1000, overlap=200
2025-05-15 18:08:03,789 - document_extraction - INFO - Input text length: 2491 characters
2025-05-15 18:08:03,789 - document_extraction - INFO - Text chunking complete. Created 4 chunks
2025-05-15 18:08:03,789 - document_storage - INFO - Text chunking complete. Created 4 chunks
2025-05-15 18:08:03,789 - document_storage - INFO - Generating embeddings and storing chunks for document ID: 36
2025-05-15 18:08:03,789 - document_storage - INFO - Starting to store chunks for document ID: 36, Title: Sample Document
2025-05-15 18:08:03,789 - document_storage - INFO - Processing 4 chunks to store in database
2025-05-15 18:08:03,789 - document_storage - INFO - Generating embeddings for 4 chunks
2025-05-15 18:08:03,789 - document_storage - INFO - Generating embeddings for 4 texts (~427 tokens)
2025-05-15 18:08:03,789 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 18:08:04,561 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 18:08:04,865 - document_storage - INFO - OpenAI API request completed in 1.08 seconds
2025-05-15 18:08:04,865 - document_storage - INFO - Generated 4 embeddings with dimension 1536
2025-05-15 18:08:04,865 - document_storage - INFO - Token usage: 569 prompt tokens, 569 total tokens
2025-05-15 18:08:04,865 - document_storage - INFO - Embedding generation completed in 1.08 seconds (3.72 texts/second)
2025-05-15 18:08:04,865 - document_storage - INFO - Successfully generated 4 embeddings in 1.08 seconds
2025-05-15 18:08:04,865 - document_storage - INFO - Storing chunks and embeddings in database
2025-05-15 18:08:04,902 - document_storage - INFO - Successfully stored 4 chunks in 0.04 seconds
2025-05-15 18:08:04,902 - document_storage - INFO - Marking document ID: 36 as processed
2025-05-15 18:08:04,903 - document_storage - INFO - Document ID: 36 successfully marked as processed
2025-05-15 18:08:04,904 - document_storage - INFO - Document chunk storage process completed in 1.12 seconds for document ID: 36
2025-05-15 18:08:04,905 - document_storage - INFO - Document processing complete for ID: 36
2025-05-15 18:08:06,783 - root - INFO - Creating a new chat session for user Raj
2025-05-15 18:08:26,721 - root - INFO - Fetching chat sessions for user Raj
2025-05-15 18:08:26,723 - root - INFO - Received a question for ChatSession ID 18
2025-05-15 18:08:26,723 - root - INFO - Question: president name
2025-05-15 18:08:26,726 - root - INFO - Running similarity search for document_id=36, top_k=5
2025-05-15 18:08:26,726 - document_storage - INFO - Generating embeddings for 1 texts (~2 tokens)
2025-05-15 18:08:26,726 - document_storage - INFO - Using embedding model: text-embedding-3-small
2025-05-15 18:08:27,293 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-15 18:08:27,308 - document_storage - INFO - OpenAI API request completed in 0.58 seconds
2025-05-15 18:08:27,308 - document_storage - INFO - Generated 1 embeddings with dimension 1536
2025-05-15 18:08:27,308 - document_storage - INFO - Token usage: 3 prompt tokens, 3 total tokens
2025-05-15 18:08:27,308 - document_storage - INFO - Embedding generation completed in 0.58 seconds (1.72 texts/second)
2025-05-15 18:08:27,311 - root - INFO - Retrieved 4 chunks for document_id=36
2025-05-15 18:08:27,319 - root - INFO - Top similarity score: 0.3673821537961299
2025-05-15 18:08:27,319 - root - INFO - Returning top 4 chunks
2025-05-15 18:08:27,319 - root - INFO - Found 4 relevant chunks
2025-05-15 18:08:28,727 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-15 18:08:28,730 - root - INFO - Generated response using OpenAI
